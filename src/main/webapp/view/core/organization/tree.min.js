if(typeof(window.dhx4)=="undefined"){window.dhx4={version:"4.1.2",skin:null,skinDetect:function(a){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[this.readFromCss(a+"_skin_detect")]||null},readFromCss:function(c,d){var b=document.createElement("DIV");b.className=c;if(document.body.firstChild!=null){document.body.insertBefore(b,document.body.firstChild)}else{document.body.appendChild(b)}var a=b[d||"offsetWidth"];b.parentNode.removeChild(b);b=null;return a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var c=this.first();for(var b in this.data){c=Math.max(c,this.data[b])}return c},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y")},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null;return obj},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).top},_aOfs:function(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent}return{top:c,left:b}},_aOfsRect:function(d){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||h.scrollTop;var e=window.pageXOffset||b.scrollLeft||h.scrollLeft;var f=b.clientTop||h.clientTop||0;var j=b.clientLeft||h.clientLeft||0;var k=g.top+a-f;var c=g.left+e-j;return{top:Math.round(k),left:Math.round(c)}},getOffset:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfs(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(d){if(this._isObj(d)){var c={};for(var b in d){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}else{var c=[];for(var b=0;b<d.length;b++){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}return c},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var b={};b.left=document.body.scrollLeft;b.right=b.left+(window.innerWidth||document.body.clientWidth);b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return b},selectTextRange:function(d,g,b){d=(typeof(d)=="string"?document.getElementById(d):d);var a=d.value.length;g=Math.max(Math.min(g,a),0);b=Math.min(b,a);if(d.setSelectionRange){try{d.setSelectionRange(g,b)}catch(f){}}else{if(d.createTextRange){var c=d.createTextRange();c.moveStart("character",g);c.moveEnd("character",b-a);try{c.select()}catch(f){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var c={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var b in c){if(this.transData.transProp==false&&document.documentElement.style[b]!=null){this.transData.transProp=b;this.transData.transEv=c[b]}}c=null}return this.transData},_xmlNodeValue:function(a){var c="";for(var b=0;b<a.childNodes.length;b++){c+=(a.childNodes[b].nodeValue!=null?a.childNodes[b].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"")}return c}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isIE8=(navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0);window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0);window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0)}if(typeof(window.dhx4.template)=="undefined"){window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")};window.dhx4.template=function(b,c,a){return b.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var g=arguments[1];var f=window.dhx4.trim(arguments[3]);var h=null;var e=[c[g]];if(f.length>0){f=f.split(":");var d=[];for(var j=0;j<f.length;j++){if(j>0&&d[d.length-1].match(/\\$/)!=null){d[d.length-1]=d[d.length-1].replace(/\\$/,"")+":"+f[j]}else{d.push(f[j])}}h=d[0];for(var j=1;j<d.length;j++){e.push(d[j])}}if(typeof(h)=="string"&&typeof(window.dhx4.template[h])=="function"){return window.dhx4.template[h].apply(window.dhx4.template,e)}if(g.length>0&&typeof(c[g])!="undefined"){if(a==true){return window.dhx4.trim(c[g])}return String(c[g])}return""})};window.dhx4.template.date=function(a,b){if(a!=null){if(a instanceof Date){return window.dhx4.date2str(a,b)}else{a=a.toString();if(a.match(/^\d*$/)!=null){return window.dhx4.date2str(new Date(parseInt(a)),b)}return a}}return""};window.dhx4.template.maxlength=function(b,a){return String(b).substr(0,a)};window.dhx4.template.number_format=function(d,e,c,a){var b=window.dhx4.template._parseFmt(e,c,a);if(b==false){return d}return window.dhx4.template._getFmtValue(d,b)};window.dhx4.template.lowercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toLowerCase()};window.dhx4.template.uppercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toUpperCase()};window.dhx4.template._parseFmt=function(h,c,a){var d=h.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(d==null||d.length!=4){return false}var b={i_len:false,i_sep:(typeof(c)=="string"?c:","),d_len:false,d_sep:(typeof(a)=="string"?a:"."),s_bef:(typeof(d[1])=="string"?d[1]:""),s_aft:(typeof(d[3])=="string"?d[3]:"")};var g=d[2].split(".");if(g[1]!=null){b.d_len=g[1].length}var e=g[0].split(",");if(e.length>1){b.i_len=e[e.length-1].length}return b};window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=fmt.s_bef;if(fmt.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==fmt.i_len&&q>0){v1=fmt.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(fmt.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<fmt.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=fmt.d_sep+t1}dhx4.temp=t1=null}v0+=fmt.s_aft;return v0}return value}}if(typeof(window.dhx4.dateLang)=="undefined"){window.dhx4.dateLang="en";window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}};window.dhx4.dateFormat={en:"%Y-%m-%d"};window.dhx4.date2str=function(f,d,a){if(d==null||typeof(d)=="undefnied"){d=window.dhx4.dateFormat[window.dhx4.dateLang]}if(a==null||typeof(a)=="undefnied"){a=window.dhx4.dateStrings[window.dhx4.dateLang]}if(f instanceof Date){var e=function(g){return(String(g).length==1?"0"+String(g):g)};var b=function(j){switch(j){case"%d":return e(f.getDate());case"%j":return f.getDate();case"%D":return a.dayShortName[f.getDay()];case"%l":return a.dayFullName[f.getDay()];case"%m":return e(f.getMonth()+1);case"%n":return f.getMonth()+1;case"%M":return a.monthShortName[f.getMonth()];case"%F":return a.monthFullName[f.getMonth()];case"%y":return e(f.getYear()%100);case"%Y":return f.getFullYear();case"%g":return(f.getHours()+11)%12+1;case"%h":return e((f.getHours()+11)%12+1);case"%G":return f.getHours();case"%H":return e(f.getHours());case"%i":return e(f.getMinutes());case"%s":return e(f.getSeconds());case"%a":return(f.getHours()>11?"pm":"am");case"%A":return(f.getHours()>11?"PM":"AM");case"%%":return"%";case"%u":return f.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null){return window.dhx4.temp_calendar.tz}var l=f.getTimezoneOffset();var k=Math.abs(Math.floor(l/60));var g=Math.abs(l)-k*60;return(l>0?"-":"+")+e(k)+":"+e(g);default:return j}};var c=String(d||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,b)}return(c||String(f))};window.dhx4.str2date=function(g,u,A){if(u==null||typeof(u)=="undefnied"){u=window.dhx4.dateFormat[window.dhx4.dateLang]}if(A==null||typeof(A)=="undefnied"){A=window.dhx4.dateStrings[window.dhx4.dateLang]}u=u.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var y=[];var l=[];u=u.replace(/%[a-z]/gi,function(e){switch(e){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":l.push(e);return"(\\d{2})";case"%D":case"%l":case"%M":case"%F":l.push(e);return"([a-zéûä\u0430-\u044F\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":l.push(e);return"(\\d{1,2})";case"%Y":l.push(e);return"(\\d{4})";case"%a":l.push(e);return"([am|pm])";case"%A":l.push(e);return"([AM|PM])";case"%u":l.push(e);return"(\\d{1,6})";case"%P":l.push(e);return"([+-]\\d{1,2}:\\d{1,2})"}return e});var B=new RegExp(u,"i");var m=g.match(B);if(m==null||m.length-1!=l.length){return"Invalid Date"}for(var b=1;b<m.length;b++){y.push(m[b])}var c={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};var n={};var j={};for(var b=0;b<l.length;b++){if(typeof(c[l[b]])!="undefined"){var d=c[l[b]];if(!n[d]){n[d]=[];j[d]=[]}n[d].push(y[b]);j[d].push(l[b])}}y=[];l=[];for(var b=1;b<=7;b++){if(n[b]!=null){for(var s=0;s<n[b].length;s++){y.push(n[b][s]);l.push(j[b][s])}}}var a=new Date();a.setDate(1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var o=function(k,e){for(var f=0;f<e.length;f++){if(e[f].toLowerCase()==k){return f}}return -1};for(var b=0;b<y.length;b++){switch(l[b]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":if(!isNaN(y[b])){a[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[l[b]]](Number(y[b])+(l[b]=="%m"||l[b]=="%n"?-1:0))}break;case"%M":case"%F":var h=o(y[b].toLowerCase(),A[{"%M":"monthShortName","%F":"monthFullName"}[l[b]]]);if(h>=0){a.setMonth(h)}break;case"%y":if(!isNaN(y[b])){var x=Number(y[b]);a.setFullYear(x+(x>50?1900:2000))}break;case"%g":case"%h":if(!isNaN(y[b])){var x=Number(y[b]);if(x<=12&&x>=0){a.setHours(x+(o("pm",y)>=0?(x==12?0:12):(x==12?-12:0)))}}break;case"%P":if(window.dhx4.temp_calendar!=null){window.dhx4.temp_calendar.tz=y[b]}break}}return a}}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"get",parse:function(a){a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE){var b=(new window.DOMParser()).parseFromString(a,"text/xml")}else{if(typeof(window.ActiveXObject)!="undefined"){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}}return b},xmltop:function(a,c,b){if(typeof c.status=="undefined"||c.status<400){xml=(!c.responseXML)?dhx4.ajax.parse(c.responseText||c):(c.responseXML||c);if(xml&&xml.documentElement!==null&&!xml.getElementsByTagName("parsererror").length){return xml.getElementsByTagName(a)[0]}}dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],b]);return document.createElement("DIV")},xpath:function(c,a){if(dhx4.isIE){return a.selectNodes(c)||[]}else{var d=[],e;var b=(a.ownerDocument||a).evaluate(c,a,null,XPathResult.ANY_TYPE,null);while(e=b.iterateNext()){d.push(e)}return d}},query:function(a){dhx4.ajax._call((a.method||"GET"),a.url,a.data||"",(a.async||true),a.callback,null,a.headers)},get:function(a,b){this._call("GET",a,null,true,b)},getSync:function(a){return this._call("GET",a,null,false)},put:function(b,a,c){this._call("PUT",b,a,true,c)},del:function(b,a,c){this._call("DELETE",b,a,true,c)},post:function(b,a,c){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){c=a;a=""}else{a=String(a)}}this._call("POST",b,a,true,c)},postSync:function(b,a){a=(a==null?"":String(a));return this._call("POST",b,a,false)},getLong:function(a,b){this._call("GET",a,null,true,b,{url:a})},postLong:function(b,a,c){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){c=a;a=""}this._call("POST",b,a,true,c,{url:b,postData:a})},_call:function(a,b,c,e,g,k,d){var j=(window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var f=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(e==true){j.onreadystatechange=function(){if((j.readyState==4)||(f==true&&j.readyState==3)){if(j.status!=200||j.responseText==""){if(!dhx4.callEvent("onAjaxError",[j])){return}}window.setTimeout(function(){if(typeof(g)=="function"){g.apply(window,[{xmlDoc:j}])}if(k!=null){if(typeof(k.postData)!="undefined"){dhx4.ajax.postLong(k.url,k.postData,g)}else{dhx4.ajax.getLong(k.url,g)}}g=null;j=null},1)}}}if(a=="GET"&&this.cache!=true){b+=(b.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()+"=1"}j.open(a,b,e);if(d){for(var h in d){j.setRequestHeader(h,d[h])}}else{if(a=="POST"){j.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{if(a=="GET"){c=null}}}j.setRequestHeader("X-Requested-With","XMLHttpRequest");j.send(c);if(!e){return{xmlDoc:j}}}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(g,c,f,e,h){if(h=="clear"){for(var b in g._dhxdataload){g._dhxdataload[b]=null;delete g._dhxdataload[b]}g._loadData=null;g._dhxdataload=null;g.load=null;g.loadStruct=null;g=null;return}g._dhxdataload={initObj:c,xmlToJson:f,xmlRootTag:e,onBeforeXLS:null};g._loadData=function(o,p,q){if(arguments.length==2){q=p;p=null}var n=null;if(arguments.length==3){q=arguments[2]}if(typeof(o)=="string"){var m=o.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var u=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(u.test(m.replace(/^<\?xml[^\?]*\?>\s*/,""))){n=dhx4.ajax.parse(o);if(n!=null){n=this[this._dhxdataload.xmlToJson].apply(this,[n])}}if(n==null&&(m.match(/^\{.*\}$/)!=null||m.match(/^\[.*\]$/)!=null)){n=dhx4.s2j(m)}if(n==null){this.callEvent("onXLS",[]);var l=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var m=this._dhxdataload.onBeforeXLS.apply(this,[o]);if(m!=null&&typeof(m)=="object"){if(m.url!=null){o=m.url}if(m.params!=null){for(var r in m.params){l.push(r+"="+encodeURIComponent(m.params[r]))}}}}var s=this;var j=function(a){var k=null;if((a.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(a.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){k=s[s._dhxdataload.xmlToJson].apply(s,[a.xmlDoc.responseXML])}else{k=dhx4.s2j(a.xmlDoc.responseText)}if(k!=null){s[s._dhxdataload.initObj].apply(s,[k,o])}s.callEvent("onXLE",[]);if(q!=null){if(typeof(q)=="function"){q.apply(s,[])}else{if(typeof(window[q])=="function"){window[q].apply(s,[])}}}j=q=null;k=a=s=null};l=l.join("&")+(typeof(p)=="string"?"&"+p:"");if(dhx4.ajax.method=="post"){dhx4.ajax.post(o,l,j)}else{if(dhx4.ajax.method=="get"){dhx4.ajax.get(o+(o.indexOf("?")>0?"&":"?")+l,j)}}return}}else{if(typeof(o.documentElement)=="object"||(typeof(o.tagName)!="undefined"&&typeof(o.getElementsByTagName)!="undefined"&&o.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){n=this[this._dhxdataload.xmlToJson].apply(this,[o])}else{n=window.dhx4._copyObj(o)}}if(n!=null){this[this._dhxdataload.initObj].apply(this,[n])}if(q!=null){if(typeof(q)=="function"){q.apply(this,[])}else{if(typeof(window[q])=="function"){window[q].apply(this,[])}}q=null}};if(h!=null){var d={struct:"loadStruct",data:"load"};for(var b in h){if(h[b]==true){g[d[b]]=function(){return this._loadData.apply(this,arguments)}}}}g=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,b){if(b=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(c,e){c=String(c).toLowerCase();if(!this.dhxevs.data[c]){this.dhxevs.data[c]={}}var d=window.dhx4.newId();this.dhxevs.data[c][d]=e;return d};a.detachEvent=function(f){for(var d in this.dhxevs.data){var e=0;for(var c in this.dhxevs.data[d]){if(c==f){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}else{e++}}if(e==0){this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}}};a.checkEvent=function(c){c=String(c).toLowerCase();return(this.dhxevs.data[c]!=null)};a.callEvent=function(d,f){d=String(d).toLowerCase();if(this.dhxevs.data[d]==null){return true}var e=true;for(var c in this.dhxevs.data[d]){e=this.dhxevs.data[d][c].apply(this,f)&&e}return e};a.detachAllEvents=function(){for(var d in this.dhxevs.data){for(var c in this.dhxevs.data[d]){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}};a=null};dhx4._eventable(dhx4)}if(typeof(window.dhtmlx)=="undefined"){window.dhtmlx={extend:function(d,c){for(var e in c){if(!d[e]){d[e]=c[e]}}return d},extend_api:function(a,d,c){var b=window[a];if(!b){return}window[a]=function(g){if(g&&typeof g=="object"&&!g.tagName){var f=b.apply(this,(d._init?d._init(g):arguments));for(var e in dhtmlx){if(d[e]){this[d[e]](dhtmlx[e])}}for(var e in g){if(d[e]){this[d[e]](g[e])}else{if(e.indexOf("on")===0){this.attachEvent(e,g[e])}}}}else{var f=b.apply(this,arguments)}if(d._patch){d._patch(this)}return f||this};window[a].prototype=b.prototype;if(c){dhtmlx.extend(window[a].prototype,c)}},url:function(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(c){if(!c){c=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,c);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(c,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var b=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var f=document.createElement("Div");f.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=f.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);b.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=c.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=c.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!c.srcElement){var d=c.target}else{d=c.srcElement}dragger.checkLanding(d,c)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(e){if(window.name){var c=parent.frames[window.name].frameElement.offsetParent;var d=0;var b=0;while(c){d+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);d+=a.split("_")[0]*1;b+=a.split("_")[1]*1}if(e){return d+"_"+b}else{this.fx=d}this.fy=b}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(b,a){if((b)&&(b.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=b;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((b)&&(b.tagName!="BODY")){this.checkLanding(b.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(b,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:b.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(c){if(c){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(c,d){if(c){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=c.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=c.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=c.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=c.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(d))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(b){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!c||d)?1:0))}}catch(b){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}if(typeof(window.dhtmlxEvent)=="undefined"){function dhtmlxEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}}}if(dhtmlxEvent.touchDelay==null){dhtmlxEvent.touchDelay=2000}if(typeof(dhtmlxEvent.initTouch)=="undefined"){dhtmlxEvent.initTouch=function(){var d;var e;var b,a;dhtmlxEvent(document.body,"touchstart",function(f){e=f.touches[0].target;b=f.touches[0].clientX;a=f.touches[0].clientY;d=window.setTimeout(c,dhtmlxEvent.touchDelay)});function c(){if(e){var f=document.createEvent("HTMLEvents");f.initEvent("dblclick",true,true);e.dispatchEvent(f);d=e=null}}dhtmlxEvent(document.body,"touchmove",function(f){if(d){if(Math.abs(f.touches[0].clientX-b)>50||Math.abs(f.touches[0].clientY-a)>50){window.clearTimeout(d);d=e=false}}});dhtmlxEvent(document.body,"touchend",function(f){if(d){window.clearTimeout(d);d=e=false}});dhtmlxEvent.initTouch=function(){}}}function dhtmlXMenuObject(e,f){var d=this;this.conf={skin:(f||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxmenu")||"dhx_skyblue"),mode:"web",align:"right",is_touched:false,selected:-1,last_click:-1,fixed_pos:false,rtl:false,icons_path:"",arrow_ff_fix:(navigator.userAgent.indexOf("MSIE")>=0&&document.compatMode=="BackCompat"),live_id:window.dhx4.newId(),tags:{root:"menu",item:"item",text_ext:"itemtext",userdata:"userdata",tooltip:"tooltip",hotkey:"hotkey",href:"href"},autoload:{},hide_tm:{},top_mode:true,top_tmtime:200,v_enabled:false,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:"bottom",dir_sublv:"right",auto_overflow:false,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,tm_sec:400,tm_handler:null,dload:false,dload_url:"",dload_icon:false,dload_params:{action:"loadMenu"},dload_pid:"parentId",tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:false,ctx_zoneid:false,ctx_autoshow:true,ctx_autohide:true,ctx_hideall:true,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]};if(typeof(e)=="object"&&e!=null&&typeof(e.tagName)=="undefined"){if(e.icons_path!=null||e.icon_path!=null){this.conf.icons_path=(e.icons_path||e.icon_path)}if(e.skin!=null){this.conf.skin=e.skin}if(e.visible_area){this.conf.v_enabled=true;this.conf.v={x1:e.visible_area.x1,x2:e.visible_area.x2,y1:e.visible_area.y1,y2:e.visible_area.y2}}for(var c in {json:1,xml:1,items:1,top_text:1,align:1,open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1}){if(e[c]!=null){this.conf.autoload[c]=e[c]}}e=e.parent}if(e==null){this.base=document.body}else{var b=(typeof(e)=="string"?document.getElementById(e):e);if(b!=null){this.base=b;if(!this.base.id){this.base.id=(new Date()).valueOf()}this.base.className+=" dhtmlxMenu_"+this.conf.skin+"_Middle dir_left";this.base._autoSkinUpdate=true;if(this.base.oncontextmenu){this.base._oldContextMenuHandler=this.base.oncontextmenu}this.conf.ctx_baseid=this.base.id;this.base.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};this.base.oncontextmenu=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false}}else{this.base=document.body}}this.idPrefix="";this.topId="dhxWebMenuTopId";this.idPull={};this.itemPull={};this.userData={};this.radio={};this.setSkin=function(h){var j=this.conf.skin;this.conf.skin=h;switch(this.conf.skin){case"dhx_skyblue":case"dhx_web":this.conf.tl_botmarg=2;this.conf.tl_rmarg=1;this.conf.tl_ofsleft=1;break;case"dhx_terrace":this.conf.tl_botmarg=0;this.conf.tl_rmarg=0;this.conf.tl_ofsleft=0;break}if(this.base._autoSkinUpdate){this.base.className=this.base.className.replace("dhtmlxMenu_"+j+"_Middle","")+" dhtmlxMenu_"+this.conf.skin+"_Middle"}for(var g in this.idPull){this.idPull[g].className=String(this.idPull[g].className).replace(j,this.conf.skin)}};this.setSkin(this.conf.skin);this._addSubItemToSelected=function(h,g){var a=true;for(var j=0;j<this.conf.selected_sub.length;j++){if((this.conf.selected_sub[j][0]==h)&&(this.conf.selected_sub[j][1]==g)){a=false}}if(a==true){this.conf.selected_sub.push(new Array(h,g))}return a};this._removeSubItemFromSelected=function(j,h){var a=new Array();var g=false;for(var k=0;k<this.conf.selected_sub.length;k++){if((this.conf.selected_sub[k][0]==j)&&(this.conf.selected_sub[k][1]==h)){g=true}else{a[a.length]=this.conf.selected_sub[k]}}if(g==true){this.conf.selected_sub=a}return g};this._getSubItemToDeselectByPolygon=function(j){var a=new Array();for(var k=0;k<this.conf.selected_sub.length;k++){if(this.conf.selected_sub[k][1]==j){a[a.length]=this.conf.selected_sub[k][0];a=a.concat(this._getSubItemToDeselectByPolygon(this.conf.selected_sub[k][0]));var h=true;for(var g=0;g<this.conf.opened_poly.length;g++){if(this.conf.opened_poly[g]==this.conf.selected_sub[k][0]){h=false}}if(h==true){this.conf.opened_poly[this.conf.opened_poly.length]=this.conf.selected_sub[k][0]}this.conf.selected_sub[k][0]=-1;this.conf.selected_sub[k][1]=-1}}return a};this._hidePolygon=function(a){if(this.idPull["polygon_"+a]!=null){if(this.idPull["polygon_"+a]._zId!=null){window.dhx4.zim.clear(this.idPull["polygon_"+a]._zId)}if(typeof(this._menuEffect)!="undefined"&&this._menuEffect!==false){this._hidePolygonEffect("polygon_"+a)}else{if(this.idPull["polygon_"+a].style.display=="none"){return}this.idPull["polygon_"+a].style.display="none";if(this.idPull["arrowup_"+a]!=null){this.idPull["arrowup_"+a].style.display="none"}if(this.idPull["arrowdown_"+a]!=null){this.idPull["arrowdown_"+a].style.display="none"}this._updateItemComplexState(a,true,false);if(window.dhx4.isIE6&&this.idPull["polygon_"+a+"_ie6cover"]!=null){this.idPull["polygon_"+a+"_ie6cover"].style.display="none"}}a=String(a).replace(this.idPrefix,"");if(a==this.topId){a=null}this.callEvent("onHide",[a]);if(a!=null&&this.conf.skin=="dhx_terrace"&&this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId){this._improveTerraceButton(this.idPrefix+a,true)}}};this._showPolygon=function(A,j){var F=this._countVisiblePolygonItems(A);if(F==0){return}var B="polygon_"+A;if((this.idPull[B]!=null)&&(this.idPull[A]!=null)){if(this.conf.top_mode&&this.conf.mode=="web"&&!this.conf.context){if(!this.idPull[A]._mouseOver&&j==this.conf.dir_toplv){return}}if(!this.conf.fixed_pos){this._autoDetectVisibleArea()}var C=0;var E=0;var H=null;var s=null;if(this.idPull[B]._zId==null){this.idPull[B]._zId=window.dhx4.newId()}this.idPull[B]._zInd=window.dhx4.zim.reserve(this.idPull[B]._zId);this.idPull[B].style.visibility="hidden";this.idPull[B].style.left="0px";this.idPull[B].style.top="0px";this.idPull[B].style.display="";this.idPull[B].style.zIndex=this.idPull[B]._zInd;if(this.conf.auto_overflow){if(this.idPull[B].firstChild.offsetHeight>this.conf.v.y1+this.conf.v.y2){var r=Math.floor((this.conf.v.y2-this.conf.v.y1-35)/24);this.conf.overflow_limit=r}else{this.conf.overflow_limit=0;if(this.idPull["arrowup_"+A]!=null){this._removeUpArrow(String(A).replace(this.idPrefix,""))}if(this.idPull["arrowdown_"+A]!=null){this._removeDownArrow(String(A).replace(this.idPrefix,""))}}}if(this.conf.overflow_limit>0&&this.conf.overflow_limit<F){if(this.idPull["arrowup_"+A]==null){this._addUpArrow(String(A).replace(this.idPrefix,""))}if(this.idPull["arrowdown_"+A]==null){this._addDownArrow(String(A).replace(this.idPrefix,""))}H=this.idPull["arrowup_"+A];H.style.display="none";s=this.idPull["arrowdown_"+A];s.style.display="none"}if(this.conf.overflow_limit>0){if(this.conf.overflow_limit<F){this.idPull[B].childNodes[1].style.height=24*this.conf.overflow_limit+"px";H.style.width=s.style.width=this.idPull[B].childNodes[1].style.width=this.idPull[B].childNodes[1].childNodes[0].offsetWidth+"px";this.idPull[B].childNodes[1].scrollTop=0;H.style.display="";C=H.offsetHeight;s.style.display="";E=s.offsetHeight}else{this.idPull[B].childNodes[1].style.height="";this.idPull[B].childNodes[1].style.width=""}}if(this.itemPull[A]!=null){var p="polygon_"+this.itemPull[A]["parent"]}else{if(this.conf.context){var p=this.idPull[this.idPrefix+this.topId]}}var a=(this.idPull[A].tagName!=null?window.dhx4.absLeft(this.idPull[A]):this.idPull[A][0]);var G=(this.idPull[A].tagName!=null?window.dhx4.absTop(this.idPull[A]):this.idPull[A][1]);var g=(this.idPull[A].tagName!=null?this.idPull[A].offsetWidth:0);var k=(this.idPull[A].tagName!=null?this.idPull[A].offsetHeight:0);var o=0;var n=0;var q=this.idPull[B].offsetWidth;var D=this.idPull[B].childNodes[1].offsetHeight+C+E;if(j=="bottom"){if(this.conf.rtl){o=a+(g!=null?g:0)-q}else{if(this.conf.align=="right"){o=a+g-q}else{o=a-1+(j==this.conf.dir_toplv?this.conf.tl_rmarg:0)}}n=G-1+k+this.conf.tl_botmarg}if(j=="right"){o=a+g-1;n=G+2}if(j=="left"){o=a-this.idPull[B].offsetWidth+2;n=G+2}if(j=="top"){o=a-1;n=G-D+2}if(this.conf.fixed_pos){var v=65536;var u=65536}else{var v=(this.conf.v.x2!=null?this.conf.v.x2:0);var u=(this.conf.v.y2!=null?this.conf.v.y2:0);if(v==0){if(window.innerWidth){v=window.innerWidth;u=window.innerHeight}else{v=document.body.offsetWidth;u=document.body.scrollHeight}}}if(o+q>v&&!this.conf.rtl){o=a-q+2}if(o<this.conf.v.x1&&this.conf.rtl){o=a+g-2}if(o<0){o=0}if(n+D>u&&this.conf.v.y2!=null){n=Math.max(G+k-D+2,(this.conf.v_enabled?this.conf.v.y1+2:2));if(this.conf.context&&this.idPrefix+this.topId==A&&s!=null){n=n-2}if(this.itemPull[A]!=null&&!this.conf.context){if(this.itemPull[A]["parent"]==this.idPrefix+this.topId){n=n-this.base.offsetHeight}}}this.idPull[B].style.left=o+"px";this.idPull[B].style.top=n+"px";if(typeof(this._menuEffect)!="undefined"&&this._menuEffect!==false){this._showPolygonEffect(B)}else{this.idPull[B].style.visibility="";if(this.conf.overflow_limit>0&&this.conf.overflow_limit<F){this.idPull[B].childNodes[1].scrollTop=0;this._checkArrowsState(A)}if(window.dhx4.isIE6){var m=B+"_ie6cover";if(this.idPull[m]==null){var l=document.createElement("IFRAME");l.className="dhtmlxMenu_IE6CoverFix_"+this.conf.skin;l.frameBorder=0;l.setAttribute("src","javascript:false;");document.body.insertBefore(l,document.body.firstChild);this.idPull[m]=l}this.idPull[m].style.left=o+"px";this.idPull[m].style.top=n+"px";this.idPull[m].style.width=this.idPull[B].offsetWidth+"px";this.idPull[m].style.height=this.idPull[B].offsetHeight+"px";this.idPull[m].style.zIndex=this.idPull[B].style.zIndex-1;this.idPull[m].style.display=""}}A=String(A).replace(this.idPrefix,"");if(A==this.topId){A=null}this.callEvent("onShow",[A]);if(A!=null&&this.conf.skin=="dhx_terrace"&&this.itemPull[this.idPrefix+A].parent==this.idPrefix+this.topId){this._improveTerraceButton(this.idPrefix+A,false)}}};this._redistribSubLevelSelection=function(k,j){while(this.conf.opened_poly.length>0){this.conf.opened_poly.pop()}var a=this._getSubItemToDeselectByPolygon(j);this._removeSubItemFromSelected(-1,-1);for(var g=0;g<a.length;g++){if((this.idPull[a[g]]!=null)&&(a[g]!=k)){if(this.itemPull[a[g]]["state"]=="enabled"){this.idPull[a[g]].className="sub_item"}}}for(var g=0;g<this.conf.opened_poly.length;g++){if(this.conf.opened_poly[g]!=j){this._hidePolygon(this.conf.opened_poly[g])}}if(this.itemPull[k]["state"]=="enabled"){this.idPull[k].className="sub_item_selected";if(this.itemPull[k]["complex"]&&this.conf.dload&&(this.itemPull[k]["loaded"]=="no")){if(this.conf.dload_icon==true){this._updateLoaderIcon(k,true)}this.itemPull[k].loaded="get";var h=k.replace(this.idPrefix,"");this._dhxdataload.onBeforeXLS=function(){var m={params:{}};m.params[this.conf.dload_pid]=h;for(var l in this.conf.dload_params){m.params[l]=this.conf.dload_params[l]}return m};this.loadStruct(this.conf.dload_url)}if(this.itemPull[k]["complex"]||(this.conf.dload&&(this.itemPull[k]["loaded"]=="yes"))){if((this.itemPull[k]["complex"])&&(this.idPull["polygon_"+k]!=null)){this._updateItemComplexState(k,true,true);this._showPolygon(k,this.conf.dir_sublv)}}this._addSubItemToSelected(k,j);this.conf.selected=k}};this._doOnClick=function(g,u,l){this.conf.last_click=g;if(this.itemPull[this.idPrefix+g]["href_link"]!=null&&this.itemPull[this.idPrefix+g].state=="enabled"){var n=document.createElement("FORM");var r=String(this.itemPull[this.idPrefix+g]["href_link"]).split("?");n.action=r[0];if(r[1]!=null){var h=String(r[1]).split("&");for(var a=0;a<h.length;a++){var s=String(h[a]).split("=");var o=document.createElement("INPUT");o.type="hidden";o.name=(s[0]||"");o.value=(s[1]||"");n.appendChild(o)}}if(this.itemPull[this.idPrefix+g]["href_target"]!=null){n.target=this.itemPull[this.idPrefix+g]["href_target"]}n.style.display="none";document.body.appendChild(n);n.submit();if(n!=null){document.body.removeChild(n);n=null}return}if(u.charAt(0)=="c"){return}if(u.charAt(1)=="d"){return}if(u.charAt(2)=="s"){return}if(this.checkEvent("onClick")){this.callEvent("onClick",[g,this.conf.ctx_zoneid,l])}else{if((u.charAt(1)=="d")||(this.conf.mode=="win"&&u.charAt(2)=="t")){return}}if(this.conf.context&&this._isContextMenuVisible()&&this.conf.ctx_autohide){this._hideContextMenu()}else{if(this._clearAndHide){this._clearAndHide()}}};this._doOnTouchMenu=function(a){if(this.conf.is_touched==false){this.conf.is_touched=true;if(this.checkEvent("onTouch")){this.callEvent("onTouch",[a])}}};this._searchMenuNode=function(h,l){var a=new Array();for(var k=0;k<l.length;k++){if(typeof(l[k])=="object"){if(l[k].length==5){if(typeof(l[k][0])!="object"){if((l[k][0].replace(this.idPrefix,"")==h)&&(k==0)){a=l}}}var g=this._searchMenuNode(h,l[k]);if(g.length>0){a=g}}}return a};this._getMenuNodes=function(j){var g=new Array;for(var h in this.itemPull){if(this.itemPull[h]["parent"]==j){g[g.length]=h}}return g};this._genStr=function(a){var g="";var j="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var h=0;h<a;h++){g+=j.charAt(Math.round(Math.random()*(j.length-1)))}return g};this.getItemType=function(a){a=this.idPrefix+a;if(this.itemPull[a]==null){return null}return this.itemPull[a]["type"]};this.forEachItem=function(h){for(var g in this.itemPull){h(String(g).replace(this.idPrefix,""))}};this._clearAndHide=function(){d.conf.selected=-1;d.conf.last_click=-1;while(d.conf.opened_poly.length>0){d.conf.opened_poly.pop()}for(var a=0;a<d.conf.selected_sub.length;a++){var g=d.conf.selected_sub[a][0];if(d.idPull[g]!=null){if(d.itemPull[g]["state"]=="enabled"){if(d.idPull[g].className=="sub_item_selected"){d.idPull[g].className="sub_item"}if(d.idPull[g].className=="dhtmlxMenu_"+d.conf.skin+"_TopLevel_Item_Selected"){if(d.itemPull[g]["cssNormal"]!=null){d.idPull[g].className=d.itemPull[g]["cssNormal"]}else{d.idPull[g].className="dhtmlxMenu_"+d.conf.skin+"_TopLevel_Item_Normal"}}}}d._hidePolygon(g)}d.conf.is_touched=false;if(d.conf.context&&d.conf.ctx_hideall){d._hidePolygon(d.idPrefix+d.topId)}};this._showSubLevelItem=function(g,a){if(document.getElementById("arrow_"+this.idPrefix+g)!=null){document.getElementById("arrow_"+this.idPrefix+g).style.display=(a?"none":"")}if(document.getElementById("image_"+this.idPrefix+g)!=null){document.getElementById("image_"+this.idPrefix+g).style.display=(a?"none":"")}if(document.getElementById(this.idPrefix+g)!=null){document.getElementById(this.idPrefix+g).style.display=(a?"":"none")}};this._hideSubLevelItem=function(a){this._showSubLevelItem(a,true)};this.idPrefix=this._genStr(12)+"_";this._bodyClick=function(a){a=a||event;if(a.button==2||(window.dhx4.isOpera&&a.ctrlKey==true)){return}if(d.conf.context){if(d.conf.ctx_autohide&&(!window.dhx4.isOpera||(d._isContextMenuVisible()&&window.dhx4.isOpera))){d._hideContextMenu()}}else{if(d._clearAndHide){d._clearAndHide()}}};this._bodyContext=function(h){h=h||event;var g=String((h.srcElement||h.target).className);if(g.search("dhtmlxMenu")!=-1&&g.search("SubLevelArea")!=-1){return}var a=true;var j=h.target||h.srcElement;while(j!=null){if(j.id!=null){if(d.isContextZone(j.id)){a=false}}if(j==document.body){a=false}j=j.parentNode}if(a){d.hideContextMenu()}};if(typeof(window.addEventListener)!="undefined"){window.addEventListener("click",this._bodyClick,false);window.addEventListener("contextmenu",this._bodyContext,false)}else{document.body.attachEvent("onclick",this._bodyClick);document.body.attachEvent("oncontextmenu",this._bodyContext)}this.unload=function(){window.dhx4._eventable(this,"clear");dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]}catch(h){}this.conf.live_id=null;if(typeof(window.addEventListener)=="function"){window.removeEventListener("click",this._bodyClick,false);window.removeEventListener("contextmenu",this._bodyContext,false)}else{document.body.detachEvent("onclick",this._bodyClick);document.body.detachEvent("oncontextmenu",this._bodyContext)}this._bodyClick=null;this._bodyContext=null;this.removeItem(this.idPrefix+this.topId,true);this.itemPull=null;this.idPull=null;if(this.conf.context){for(var g in this.conf.ctx_zones){this.removeContextZone(g)}}if(this.cont!=null){this.cont.className="";this.cont.parentNode.removeChild(this.cont);this.cont=null}if(this.base!=null){if(!this.conf.context){this.base.className=""}if(!this.conf.context){this.base.oncontextmenu=(this.base._oldContextMenuHandler||null)}this.base.onselectstart=null;this.base=null}for(var g in this){this[g]=null}d=null};dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=this;window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson",this.conf.tags.root,{struct:true});window.dhx4._eventable(this);if(window.dhx4.s2b(this.conf.autoload.context)==true){this.renderAsContextMenu()}if(this.conf.autoload.dynamic!=null){this.enableDynamicLoading(this.conf.autoload.dynamic,window.dhx4.s2b(this.conf.autoload.dynamic_icon))}else{if(this.conf.autoload.items!=null){this.loadStruct(this.conf.autoload.items,this.conf.autoload.onload)}else{if(this.conf.autoload.json!=null){this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload)}else{if(this.conf.autoload.xml!=null){this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload)}}}}for(var c in {onclick:1,oncheckboxclick:1,onradioclick:1}){if(this.conf.autoload[c]!=null){if(typeof(this.conf.autoload[c])=="function"){this.attachEvent(c,this.conf.autoload[c])}else{if(typeof(window[this.conf.autoload[c]])=="function"){this.attachEvent(c,window[this.conf.autoload[c]])}}}}if(this.conf.autoload.top_text!=null){this.setTopText(this.conf.autoload.top_text)}if(this.conf.autoload.align!=null){this.setAlign(this.conf.autoload.align)}if(this.conf.autoload.open_mode!=null){this.setOpenMode(this.conf.autoload.open_mode)}if(this.conf.autoload.overflow!=null){this.setOverflowHeight(this.conf.autoload.overflow)}for(var c in this.conf.autoload){this.conf.autoload[c]=null;delete this.conf.autoload[c]}this.conf.autoload=null;return this}dhtmlXMenuObject.prototype._init=function(){if(this._isInited==true){return}if(this.conf.dload){this._dhxdataload.onBeforeXLS=function(){var c={params:{}};for(var b in this.conf.dload_params){c.params[b]=this.conf.dload_params[b]}return c};this.loadStruct(this.conf.dload_url)}else{this._initTopLevelMenu();this._isInited=true}};dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(f){var d=0;for(var b in this.itemPull){var c=this.itemPull[b]["parent"];var e=this.itemPull[b]["type"];if(this.idPull[b]!=null){if(c==f&&(e=="item"||e=="radio"||e=="checkbox")&&this.idPull[b].style.display!="none"){d++}}}return d};dhtmlXMenuObject.prototype._redefineComplexState=function(b){if(this.idPrefix+this.topId==b){return}if((this.idPull["polygon_"+b]!=null)&&(this.idPull[b]!=null)){var a=this._countVisiblePolygonItems(b);if((a>0)&&(!this.itemPull[b]["complex"])){this._updateItemComplexState(b,true,false)}if((a==0)&&(this.itemPull[b]["complex"])){this._updateItemComplexState(b,false,false)}}};dhtmlXMenuObject.prototype._updateItemComplexState=function(e,c,d){if((!this.conf.context)&&(this._getItemLevelType(e.replace(this.idPrefix,""))=="TopLevel")){this.itemPull[e]["complex"]=c;return}if((this.idPull[e]==null)||(this.itemPull[e]==null)){return}this.itemPull[e]["complex"]=c;if(e==this.idPrefix+this.topId){return}var a=null;var b=this.idPull[e].childNodes[this.conf.rtl?0:2];if(b.childNodes[0]){if(String(b.childNodes[0].className).search("complex_arrow")===0){a=b.childNodes[0]}}if(this.itemPull[e]["complex"]){if(a==null){a=document.createElement("DIV");a.className="complex_arrow";a.id="arrow_"+e;while(b.childNodes.length>0){b.removeChild(b.childNodes[0])}b.appendChild(a)}if(this.conf.dload&&(this.itemPull[e].loaded=="get")&&this.conf.dload_icon){if(a.className!="complex_arrow_loading"){a.className="complex_arrow_loading"}}else{a.className="complex_arrow"}return}if((!this.itemPull[e]["complex"])&&(a!=null)){b.removeChild(a);if(this.itemPull[e]["hotkey_backup"]!=null&&this.setHotKey){this.setHotKey(e.replace(this.idPrefix,""),this.itemPull[e]["hotkey_backup"])}}};dhtmlXMenuObject.prototype._getItemLevelType=function(a){return(this.itemPull[this.idPrefix+a]["parent"]==this.idPrefix+this.topId?"TopLevel":"SubLevelArea")};dhtmlXMenuObject.prototype.setIconsPath=function(a){this.conf.icons_path=a};dhtmlXMenuObject.prototype._updateItemImage=function(c,d){c=this.idPrefix+c;var j=this.itemPull[c]["type"];if(j=="checkbox"||j=="radio"){return}var f=(this.itemPull[c]["parent"]==this.idPrefix+this.topId&&!this.conf.context);var g=null;if(f){for(var a=0;a<this.idPull[c].childNodes.length;a++){try{if(this.idPull[c].childNodes[a].className=="dhtmlxMenu_TopLevel_Item_Icon"){g=this.idPull[c].childNodes[a]}}catch(h){}}}else{try{var g=this.idPull[c].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(h){}if(!(g!=null&&typeof(g.className)!="undefined"&&g.className=="sub_icon")){g=null}}var l=this.itemPull[c][(this.itemPull[c]["state"]=="enabled"?"imgen":"imgdis")];if(l.length>0){if(g!=null){g.src=this.conf.icons_path+l}else{if(f){var g=document.createElement("IMG");g.className="dhtmlxMenu_TopLevel_Item_Icon";g.src=this.conf.icons_path+l;g.border="0";g.id="image_"+c;if(!this.conf.rtl&&this.idPull[c].childNodes.length>0){this.idPull[c].insertBefore(g,this.idPull[c].childNodes[0])}else{this.idPull[c].appendChild(g)}}else{var g=document.createElement("IMG");g.className="sub_icon";g.src=this.conf.icons_path+l;g.border="0";g.id="image_"+c;var k=this.idPull[c].childNodes[this.conf.rtl?2:0];while(k.childNodes.length>0){k.removeChild(k.childNodes[0])}k.appendChild(g)}}}else{if(g!=null){var b=g.parentNode;b.removeChild(g);b.innerHTML="&nbsp;";b=g=null}}};dhtmlXMenuObject.prototype._getAllParents=function(f){var c=new Array();for(var b in this.itemPull){if(this.itemPull[b]["parent"]==f){c[c.length]=this.itemPull[b]["id"];if(this.itemPull[b]["complex"]){var d=this._getAllParents(this.itemPull[b]["id"]);for(var e=0;e<d.length;e++){c[c.length]=d[e]}}}}return c};dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(this.conf.v_enabled){return}var a=window.dhx4.screenDim();this.conf.v.x1=a.left;this.conf.v.x2=a.right;this.conf.v.y1=a.top;this.conf.v.y2=a.bottom};dhtmlXMenuObject.prototype.getItemPosition=function(e){e=this.idPrefix+e;var d=-1;if(this.itemPull[e]==null){return d}var a=this.itemPull[e]["parent"];var c=(this.idPull["polygon_"+a]!=null?this.idPull["polygon_"+a].tbd:this.cont);for(var b=0;b<c.childNodes.length;b++){if(c.childNodes[b]==this.idPull["separator_"+e]||c.childNodes[b]==this.idPull[e]){d=b}}return d};dhtmlXMenuObject.prototype.setItemPosition=function(g,f){g=this.idPrefix+g;if(this.idPull[g]==null){return}var b=(this.itemPull[g]["parent"]==this.idPrefix+this.topId);var a=this.idPull[g];var d=this.getItemPosition(g.replace(this.idPrefix,""));var c=this.itemPull[g]["parent"];var e=(this.idPull["polygon_"+c]!=null?this.idPull["polygon_"+c].tbd:this.cont);e.removeChild(e.childNodes[d]);if(f<0){f=0}if(b&&f<1){f=1}if(f<e.childNodes.length){e.insertBefore(a,e.childNodes[f])}else{e.appendChild(a)}};dhtmlXMenuObject.prototype.getParentId=function(a){a=this.idPrefix+a;if(this.itemPull[a]==null){return null}return((this.itemPull[a]["parent"]!=null?this.itemPull[a]["parent"]:this.topId).replace(this.idPrefix,""))};dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()};dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,true);this._isInited=false;this.idPrefix=this._genStr(12)+"_";this.itemPull={}};if(typeof(dhtmlXMenuObject.prototype.liveInst)=="undefined"){dhtmlXMenuObject.prototype.liveInst={}}dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(d,b){var a=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var c=0;c<a.length;c++){if(a[c]!=d){this._hidePolygon(a[c])}if((this.idPull[a[c]]!=null)&&(a[c]!=d)){this.idPull[a[c]].className=this.idPull[a[c]].className.replace(/Selected/g,"Normal")}}if(this.itemPull[this.idPrefix+d]["state"]=="enabled"){this.idPull[this.idPrefix+d].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_Selected";this._addSubItemToSelected(this.idPrefix+d,"parent");this.conf.selected=(this.conf.mode=="win"?(this.conf.selected!=-1?d:this.conf.selected):d);if((this.itemPull[this.idPrefix+d]["complex"])&&(this.conf.selected!=-1)){this._showPolygon(this.idPrefix+d,this.conf.dir_toplv)}}};dhtmlXMenuObject.prototype._initTopLevelMenu=function(){this.conf.dir_toplv="bottom";this.conf.dir_sublv=(this.conf.rtl?"left":"right");if(this.conf.context){this.idPull[this.idPrefix+this.topId]=new Array(0,0);this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId)}else{var a=this._getMenuNodes(this.idPrefix+this.topId);for(var b=0;b<a.length;b++){if(this.itemPull[a[b]]["type"]=="item"){this._renderToplevelItem(a[b],null)}if(this.itemPull[a[b]]["type"]=="separator"){this._renderSeparator(a[b],null)}}}};dhtmlXMenuObject.prototype._renderToplevelItem=function(g,f){var e=this;var a=document.createElement("DIV");a.id=g;if(this.itemPull[g]["state"]=="enabled"&&this.itemPull[g]["cssNormal"]!=null){a.className=this.itemPull[g]["cssNormal"]}else{a.className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+(this.itemPull[g]["state"]=="enabled"?"Normal":"Disabled")}if(this.itemPull[g]["title"]!=""){var d=document.createElement("DIV");d.className="top_level_text";d.innerHTML=this.itemPull[g]["title"];a.appendChild(d)}if(this.itemPull[g]["tip"].length>0){a.title=this.itemPull[g]["tip"]}if((this.itemPull[g]["imgen"]!="")||(this.itemPull[g]["imgdis"]!="")){var c=this.itemPull[g][(this.itemPull[g]["state"]=="enabled")?"imgen":"imgdis"];if(c){var b=document.createElement("IMG");b.border="0";b.id="image_"+g;b.src=this.conf.icons_path+c;b.className="dhtmlxMenu_TopLevel_Item_Icon";if(a.childNodes.length>0&&!this.conf.rtl){a.insertBefore(b,a.childNodes[0])}else{a.appendChild(b)}}}a.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}return false};a.oncontextmenu=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}return false};if(!this.cont){this.cont=document.createElement("DIV");this.cont.dir="ltr";this.cont.className=(this.conf.align=="right"?"align_right":"align_left");this.base.appendChild(this.cont)}if(f!=null){f++;if(f<0){f=0}if(f>this.cont.childNodes.length-1){f=null}}if(f!=null){this.cont.insertBefore(a,this.cont.childNodes[f])}else{this.cont.appendChild(a)}this.idPull[a.id]=a;if(this.itemPull[g]["complex"]&&(!this.conf.dload)){this._addSubMenuPolygon(this.itemPull[g]["id"],this.itemPull[g]["id"])}a.onmouseover=function(){if(e.conf.mode=="web"){window.clearTimeout(e.conf.tm_handler)}var h=e._getSubItemToDeselectByPolygon("parent");e._removeSubItemFromSelected(-1,-1);for(var k=0;k<h.length;k++){if(h[k]!=this.id){e._hidePolygon(h[k])}if((e.idPull[h[k]]!=null)&&(h[k]!=this.id)){if(e.itemPull[h[k]]["cssNormal"]!=null){e.idPull[h[k]].className=e.itemPull[h[k]]["cssNormal"]}else{if(e.idPull[h[k]].className=="sub_item_selected"){e.idPull[h[k]].className="sub_item"}e.idPull[h[k]].className=e.idPull[h[k]].className.replace(/Selected/g,"Normal")}}}if(e.itemPull[this.id]["state"]=="enabled"){this.className="dhtmlxMenu_"+e.conf.skin+"_TopLevel_Item_Selected";e._addSubItemToSelected(this.id,"parent");e.conf.selected=(e.conf.mode=="win"?(e.conf.selected!=-1?this.id:e.conf.selected):this.id);if(e.conf.dload){if(e.itemPull[this.id].loaded=="no"){this._dynLoadTM=new Date().getTime();e.itemPull[this.id].loaded="get";var l=this.id.replace(e.idPrefix,"");e._dhxdataload.onBeforeXLS=function(){var n={params:{}};n.params[this.conf.dload_pid]=l;for(var m in this.conf.dload_params){n.params[m]=this.conf.dload_params[m]}return n};e.loadStruct(e.conf.dload_url)}if(e.conf.top_mode&&e.conf.mode=="web"&&!e.conf.context){this._mouseOver=true}}if((!e.conf.dload)||(e.conf.dload&&(!e.itemPull[this.id]["loaded"]||e.itemPull[this.id]["loaded"]=="yes"))){if((e.itemPull[this.id]["complex"])&&(e.conf.selected!=-1)){if(e.conf.top_mode&&e.conf.mode=="web"&&!e.conf.context){this._mouseOver=true;var j=this.id;this._menuOpenTM=window.setTimeout(function(){e._showPolygon(j,e.conf.dir_toplv)},e.conf.top_tmtime)}else{e._showPolygon(this.id,e.conf.dir_toplv)}}}}e._doOnTouchMenu(this.id.replace(e.idPrefix,""))};a.onmouseout=function(){if(!((e.itemPull[this.id]["complex"])&&(e.conf.selected!=-1))&&(e.itemPull[this.id]["state"]=="enabled")){if(e.itemPull[this.id]["cssNormal"]!=null){a.className=e.itemPull[this.id]["cssNormal"]}else{a.className="dhtmlxMenu_"+e.conf.skin+"_TopLevel_Item_Normal"}}if(e.conf.mode=="web"){window.clearTimeout(e.conf.tm_handler);e.conf.tm_handler=window.setTimeout(function(){e._clearAndHide()},e.conf.tm_sec,"JavaScript")}if(e.conf.top_mode&&e.conf.mode=="web"&&!e.conf.context){this._mouseOver=false;window.clearTimeout(this._menuOpenTM)}};a.onclick=function(l){if(e.conf.mode=="web"){window.clearTimeout(e.conf.tm_handler)}if(e.conf.mode!="web"&&e.itemPull[this.id]["state"]=="disabled"){return}l=l||event;l.cancelBubble=true;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}if(e.conf.mode=="win"){if(e.itemPull[this.id]["complex"]){if(e.conf.selected==this.id){e.conf.selected=-1;var k=false}else{e.conf.selected=this.id;var k=true}if(k){e._showPolygon(this.id,e.conf.dir_toplv)}else{e._hidePolygon(this.id)}}}var h=(e.itemPull[this.id]["complex"]?"c":"-");var m=(e.itemPull[this.id]["state"]!="enabled"?"d":"-");var j={ctrl:l.ctrlKey,alt:l.altKey,shift:l.shiftKey};e._doOnClick(this.id.replace(e.idPrefix,""),h+m+"t",j);return false};if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXMenuObject.prototype._addSubMenuPolygon=function(f,e){var b=this._renderSublevelPolygon(f,e);var a=this._getMenuNodes(e);for(c=0;c<a.length;c++){if(this.itemPull[a[c]]["type"]=="separator"){this._renderSeparator(a[c],null)}else{this._renderSublevelItem(a[c],null)}}if(f==e){var d="topLevel"}else{var d="subLevel"}for(var c=0;c<a.length;c++){if(this.itemPull[a[c]]["complex"]){this._addSubMenuPolygon(f,this.itemPull[a[c]]["id"])}}};dhtmlXMenuObject.prototype._renderSublevelPolygon=function(e,d){var b=document.createElement("DIV");b.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Polygon "+(this.conf.rtl?"dir_right":"");b.dir="ltr";b.oncontextmenu=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}f.cancelBubble=true;return false};b.id="polygon_"+d;b.onclick=function(f){f=f||event;f.cancelBubble=true};b.style.display="none";document.body.insertBefore(b,document.body.firstChild);b.innerHTML='<div style="position:relative;"></div><div style="position: relative; overflow:hidden;"></div><div style="position:relative;"></div>';var c=document.createElement("TABLE");c.className="dhtmlxMebu_SubLevelArea_Tbl";c.cellSpacing=0;c.cellPadding=0;c.border=0;var a=document.createElement("TBODY");c.appendChild(a);b.childNodes[1].appendChild(c);b.tbl=c;b.tbd=a;this.idPull[b.id]=b;if(this.sxDacProc!=null){this.idPull["sxDac_"+d]=new this.sxDacProc(b,b.className);if(window.dhx4.isIE){this.idPull["sxDac_"+d]._setSpeed(this.dacSpeedIE);this.idPull["sxDac_"+d]._setCustomCycle(this.dacCyclesIE)}else{this.idPull["sxDac_"+d]._setSpeed(this.dacSpeed);this.idPull["sxDac_"+d]._setCustomCycle(this.dacCycles)}}return b};dhtmlXMenuObject.prototype._renderSublevelItem=function(a,k){var h=this;var j=document.createElement("TR");j.className=(this.itemPull[a]["state"]=="enabled"?"sub_item":"sub_item_dis");var g=document.createElement("TD");g.className="sub_item_icon";var l=this.itemPull[a][(this.itemPull[a]["state"]=="enabled"?"imgen":"imgdis")];if(l!=""){var o=this.itemPull[a]["type"];if(o=="checkbox"||o=="radio"){var e=document.createElement("DIV");e.id="image_"+this.itemPull[a]["id"];e.className="sub_icon "+l;g.appendChild(e)}if(!(o=="checkbox"||o=="radio")){var e=document.createElement("IMG");e.id="image_"+this.itemPull[a]["id"];e.className="sub_icon";e.src=this.conf.icons_path+l;g.appendChild(e)}}else{g.innerHTML="&nbsp;"}var f=document.createElement("TD");f.className="sub_item_text";if(this.itemPull[a]["title"]!=""){var n=document.createElement("DIV");n.className="sub_item_text";n.innerHTML=this.itemPull[a]["title"];f.appendChild(n)}else{f.innerHTML="&nbsp;"}var d=document.createElement("TD");d.className="sub_item_hk";if(this.itemPull[a]["complex"]){var b=document.createElement("DIV");b.className="complex_arrow";b.id="arrow_"+this.itemPull[a]["id"];d.appendChild(b)}else{if(this.itemPull[a]["hotkey"].length>0&&!this.itemPull[a]["complex"]){var c=document.createElement("DIV");c.className="sub_item_hk";c.innerHTML=this.itemPull[a]["hotkey"];d.appendChild(c)}else{d.innerHTML="&nbsp;"}}j.appendChild(this.conf.rtl?d:g);j.appendChild(f);j.appendChild(this.conf.rtl?g:d);j.id=this.itemPull[a]["id"];j.parent=this.itemPull[a]["parent"];if(this.itemPull[a]["tip"].length>0){j.title=this.itemPull[a]["tip"]}j.onselectstart=function(p){p=p||event;if(p.preventDefault){p.preventDefault()}else{p.returnValue=false}return false};j.onmouseover=function(p){if(h.conf.hide_tm[this.id]){window.clearTimeout(h.conf.hide_tm[this.id])}if(h.conf.mode=="web"){window.clearTimeout(h.conf.tm_handler)}if(!this._visible){h._redistribSubLevelSelection(this.id,this.parent)}this._visible=true};j.onmouseout=function(){if(h.conf.mode=="web"){if(h.conf.tm_handler){window.clearTimeout(h.conf.tm_handler)}h.conf.tm_handler=window.setTimeout(function(){if(h&&h._clearAndHide){h._clearAndHide()}},h.conf.tm_sec,"JavaScript")}var p=this;if(h.conf.hide_tm[this.id]){window.clearTimeout(h.conf.hide_tm[this.id])}h.conf.hide_tm[this.id]=window.setTimeout(function(){p._visible=false},50)};j.onclick=function(q){if(!h.checkEvent("onClick")&&h.itemPull[this.id]["complex"]){return}q=q||event;q.cancelBubble=true;if(q.preventDefault){q.preventDefault()}else{q.returnValue=false}tc=(h.itemPull[this.id]["complex"]?"c":"-");td=(h.itemPull[this.id]["state"]=="enabled"?"-":"d");var p={ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey};switch(h.itemPull[this.id]["type"]){case"checkbox":h._checkboxOnClickHandler(this.id.replace(h.idPrefix,""),tc+td+"n",p);break;case"radio":h._radioOnClickHandler(this.id.replace(h.idPrefix,""),tc+td+"n",p);break;case"item":h._doOnClick(this.id.replace(h.idPrefix,""),tc+td+"n",p);break}return false};var m=this.idPull["polygon_"+this.itemPull[a]["parent"]];if(k!=null){k++;if(k<0){k=0}if(k>m.tbd.childNodes.length-1){k=null}}if(k!=null&&m.tbd.childNodes[k]!=null){m.tbd.insertBefore(j,m.tbd.childNodes[k])}else{m.tbd.appendChild(j)}this.idPull[j.id]=j};dhtmlXMenuObject.prototype._renderSeparator=function(b,g){var a=(this.conf.context?"SubLevelArea":(this.itemPull[b]["parent"]==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"));if(a=="TopLevel"&&this.conf.context){return}var e=this;if(a!="TopLevel"){var f=document.createElement("TR");f.className="sub_sep";var c=document.createElement("TD");c.colSpan="3";f.appendChild(c)}var d=document.createElement("DIV");d.id="separator_"+b;d.className=(a=="TopLevel"?"top_sep":"sub_sep");d.onselectstart=function(k){k=k||event;if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}};d.onclick=function(l){l=l||event;l.cancelBubble=true;var k={ctrl:l.ctrlKey,alt:l.altKey,shift:l.shiftKey};e._doOnClick(this.id.replace("separator_"+e.idPrefix,""),"--s",k)};if(a=="TopLevel"){if(g!=null){g++;if(g<0){g=0}if(this.cont.childNodes[g]!=null){this.cont.insertBefore(d,this.cont.childNodes[g])}else{this.cont.appendChild(d)}}else{var j=this.cont.childNodes[this.cont.childNodes.length-1];if(String(j).search("TopLevel_Text")==-1){this.cont.appendChild(d)}else{this.cont.insertBefore(d,j)}}this.idPull[d.id]=d}else{var h=this.idPull["polygon_"+this.itemPull[b]["parent"]];if(g!=null){g++;if(g<0){g=0}if(g>h.tbd.childNodes.length-1){g=null}}if(g!=null&&h.tbd.childNodes[g]!=null){h.tbd.insertBefore(f,h.tbd.childNodes[g])}else{h.tbd.appendChild(f)}c.appendChild(d);this.idPull[d.id]=f}};dhtmlXMenuObject.prototype.addNewSeparator=function(a,b){b=this.idPrefix+(b!=null?b:this._genStr(24));var c=this.idPrefix+this.getParentId(a);this._addItemIntoGlobalStrorage(b,c,"","separator",false,"","");this._renderSeparator(b,this.getItemPosition(a))};dhtmlXMenuObject.prototype._initObj=function(m,n,g){if(!(m instanceof Array)){g=m.parentId;if(g!=null&&String(g).indexOf(this.idPrefix)!==0){g=this.idPrefix+String(g)}m=m.items}for(var c=0;c<m.length;c++){if(typeof(m[c].id)=="undefined"||m[c].id==null){m[c].id=this._genStr(24)}if(m[c].text==null){m[c].text=""}if(String(m[c].id).indexOf(this.idPrefix)!==0){m[c].id=this.idPrefix+String(m[c].id)}var d={type:"item",tip:"",hotkey:"",state:"enabled",imgen:"",imgdis:""};for(var o in d){if(typeof(m[c][o])=="undefined"){m[c][o]=d[o]}}if(m[c].imgen==""&&m[c].img!=null){m[c].imgen=m[c].img}if(m[c].imgdis==""&&m[c].img_disabled!=null){m[c].imgdis=m[c].img_disabled}if(m[c].title==null&&m[c].text!=null){m[c].title=m[c].text}if(m[c].href!=null){if(m[c].href.link!=null){m[c].href_link=m[c].href.link}if(m[c].href.target!=null){m[c].href_target=m[c].href.target}}if(m[c].userdata!=null){for(var o in m[c].userdata){this.userData[m[c].id+"_"+o]=m[c].userdata[o]}}if(typeof(m[c].enabled)!="undefined"&&window.dhx4.s2b(m[c].enabled)==false){m[c].state="disabled"}else{if(typeof(m[c].disabled)!="undefined"&&window.dhx4.s2b(m[c].disabled)==true){m[c].state="disabled"}}if(typeof(m[c].parent)=="undefined"){m[c].parent=(g!=null?g:this.idPrefix+this.topId)}if(m[c].type=="checkbox"){m[c].checked=window.dhx4.s2b(m[c].checked);m[c].imgen=m[c].imgdis="chbx_"+(m[c].checked?"1":"0")}if(m[c].type=="radio"){m[c].checked=window.dhx4.s2b(m[c].checked);m[c].imgen=m[c].imgdis="rdbt_"+(m[c].checked?"1":"0");if(typeof(m[c].group)=="undefined"||m[c].group==null){m[c].group=this._genStr(24)}if(this.radio[m[c].group]==null){this.radio[m[c].group]=[]}this.radio[m[c].group].push(m[c].id)}this.itemPull[m[c].id]=m[c];if(m[c].items!=null&&m[c].items.length>0){this.itemPull[m[c].id].complex=true;this._initObj(m[c].items,true,m[c].id)}else{if(this.conf.dload&&m[c].complex==true){this.itemPull[m[c].id].loaded="no"}}this.itemPull[m[c].id].items=null}if(n!==true){if(this.conf.dload==true){if(g==null){this._initTopLevelMenu()}else{this._addSubMenuPolygon(g,g);if(this.conf.selected==g){var l=(this.itemPull[g].parent==this.idPrefix+this.topId);var b=(l&&!this.conf.context?this.conf.dir_toplv:this.conf.dir_sublv);var e=false;if(l&&this.conf.top_mode&&this.conf.mode=="web"&&!this.conf.context){var p=this.idPull[g];if(p._mouseOver==true){var f=this.conf.top_tmtime-(new Date().getTime()-p._dynLoadTM);if(f>1){var j=g;var h=this;p._menuOpenTM=window.setTimeout(function(){h._showPolygon(j,b);h=j=null},f);e=true}}}if(!e){this._showPolygon(g,b)}}this.itemPull[g].loaded="yes";if(this.conf.dload_icon==true){this._updateLoaderIcon(g,false)}}}else{this._init()}}};dhtmlXMenuObject.prototype._xmlToJson=function(f,e){var h=[];if(e==null){var j=f.getElementsByTagName(this.conf.tags.root);if(j==null||(j!=null&&j.length==0)){return{items:[]}}j=j[0]}else{j=f}if(j.getAttribute("parentId")!=null){e=this.idPrefix+j.getAttribute("parentId")}for(var b=0;b<j.childNodes.length;b++){if(typeof(j.childNodes[b].tagName)!="undefined"&&String(j.childNodes[b].tagName).toLowerCase()==this.conf.tags.item){var a=j.childNodes[b];var m={id:this.idPrefix+(a.getAttribute("id")||this._genStr(24)),title:a.getAttribute("text")||"",imgen:a.getAttribute("img")||"",imgdis:a.getAttribute("imgdis")||"",tip:"",hotkey:"",type:a.getAttribute("type")||"item"};if(a.getAttribute("cssNormal")!=null){m.cssNormal=a.getAttribute("cssNormal")}if(m.type=="checkbox"){m.checked=a.getAttribute("checked")}if(m.type=="radio"){m.checked=a.getAttribute("checked");m.group=a.getAttribute("group")}m.state="enabled";if(a.getAttribute("enabled")!=null&&window.dhx4.s2b(a.getAttribute("enabled"))==false){m.state="disabled"}else{if(a.getAttribute("disabled")!=null&&window.dhx4.s2b(a.getAttribute("disabled"))==true){m.state="disabled"}}m.parent=(e!=null?e:this.idPrefix+this.topId);if(this.conf.dload){m.complex=(a.getAttribute("complex")!=null);if(m.complex){m.loaded="no"}}else{var c=this._xmlToJson(a,m.id);m.items=c.items;m.complex=(m.items.length>0)}for(var k=0;k<a.childNodes.length;k++){if(typeof(a.childNodes[k].tagName)!="undefined"){var l=String(a.childNodes[k].tagName||"").toLowerCase();if(l==this.conf.tags.userdata){var g=a.childNodes[k];if(g.getAttribute("name")!=null){this.userData[m.id+"_"+g.getAttribute("name")]=(g.firstChild!=null&&g.firstChild.nodeValue!=null?g.firstChild.nodeValue:"")}}if(l==this.conf.tags.text_ext){m.title=a.childNodes[k].firstChild.nodeValue}if(l==this.conf.tags.tooltip){m.tip=a.childNodes[k].firstChild.nodeValue}if(l==this.conf.tags.hotkey){m.hotkey=a.childNodes[k].firstChild.nodeValue}if(l==this.conf.tags.href&&m.type=="item"){m.href_link=a.childNodes[k].firstChild.nodeValue;if(a.childNodes[k].getAttribute("target")!=null){m.href_target=a.childNodes[k].getAttribute("target")}}}}h.push(m)}}var a={parentId:e,items:h};return a};dhtmlXMenuObject.prototype.enableDynamicLoading=function(a,b){this.conf.dload=true;this.conf.dload_url=a;this.conf.dload_sign=(String(this.conf.dload_url).search(/\?/)==-1?"?":"&");this.conf.dload_icon=b;this._init()};dhtmlXMenuObject.prototype._updateLoaderIcon=function(d,c){if(this.idPull[d]==null){return}if(String(this.idPull[d].className).search("TopLevel_Item")>=0){return}var b=(this.conf.rtl?0:2);if(!this.idPull[d].childNodes[b]){return}if(!this.idPull[d].childNodes[b].childNodes[0]){return}var a=this.idPull[d].childNodes[b].childNodes[0];if(String(a.className).search("complex_arrow")===0){a.className="complex_arrow"+(c?"_loading":"")}};dhtmlXMenuObject.prototype.addNewSibling=function(d,e,a,b,c,h){var g=this.idPrefix+(e!=null?e:this._genStr(24));var f=this.idPrefix+(d!=null?this.getParentId(d):this.topId);this._addItemIntoGlobalStrorage(g,f,a,"item",b,c,h);if((f==this.idPrefix+this.topId)&&(!this.conf.context)){this._renderToplevelItem(g,this.getItemPosition(d))}else{this._renderSublevelItem(g,this.getItemPosition(d))}};dhtmlXMenuObject.prototype.addNewChild=function(g,f,d,a,b,c,e){if(g==null){if(this.conf.context){g=this.topId}else{this.addNewSibling(g,d,a,b,c,e);if(f!=null){this.setItemPosition(d,f)}return}}d=this.idPrefix+(d!=null?d:this._genStr(24));if(this.setHotKey){this.setHotKey(g,"")}g=this.idPrefix+g;this._addItemIntoGlobalStrorage(d,g,a,"item",b,c,e);if(this.idPull["polygon_"+g]==null){this._renderSublevelPolygon(g,g)}this._renderSublevelItem(d,f-1);this._redefineComplexState(g)};dhtmlXMenuObject.prototype.removeItem=function(d,f,e){if(!f){d=this.idPrefix+d}var g=null;if(d!=this.idPrefix+this.topId){if(this.itemPull[d]==null){return}if(this.idPull["polygon_"+d]&&this.idPull["polygon_"+d]._tmShow){window.clearTimeout(this.idPull["polygon_"+d]._tmShow)}var m=this.itemPull[d]["type"];if(m=="separator"){var l=this.idPull["separator_"+d];if(this.itemPull[d]["parent"]==this.idPrefix+this.topId){l.onclick=null;l.onselectstart=null;l.id=null;l.parentNode.removeChild(l)}else{l.childNodes[0].childNodes[0].onclick=null;l.childNodes[0].childNodes[0].onselectstart=null;l.childNodes[0].childNodes[0].id=null;l.childNodes[0].removeChild(l.childNodes[0].childNodes[0]);l.removeChild(l.childNodes[0]);l.parentNode.removeChild(l)}this.idPull["separator_"+d]=null;this.itemPull[d]=null;delete this.idPull["separator_"+d];delete this.itemPull[d];l=null}else{g=this.itemPull[d]["parent"];var l=this.idPull[d];l.onclick=null;l.oncontextmenu=null;l.onmouseover=null;l.onmouseout=null;l.onselectstart=null;l.id=null;while(l.childNodes.length>0){l.removeChild(l.childNodes[0])}l.parentNode.removeChild(l);this.idPull[d]=null;this.itemPull[d]=null;delete this.idPull[d];delete this.itemPull[d];l=null}m=null}for(var j in this.itemPull){if(this.itemPull[j]["parent"]==d){this.removeItem(j,true,true)}}var k=new Array(d);if(g!=null&&!e){if(this.idPull["polygon_"+g]!=null){if(this.idPull["polygon_"+g].tbd.childNodes.length==0){k.push(g);this._updateItemComplexState(g,false,false)}}}for(var b=0;b<k.length;b++){if(this.idPull["polygon_"+k[b]]){var c=this.idPull["polygon_"+k[b]];c.onclick=null;c.oncontextmenu=null;c.tbl.removeChild(c.tbd);c.tbd=null;c.childNodes[1].removeChild(c.tbl);c.tbl=null;c.id=null;c.parentNode.removeChild(c);c=null;if(window.dhx4.isIE6){var h="polygon_"+k[b]+"_ie6cover";if(this.idPull[h]!=null){document.body.removeChild(this.idPull[h]);delete this.idPull[h]}}if(this.idPull["arrowup_"+d]!=null&&this._removeArrow){this._removeArrow("arrowup_"+d)}if(this.idPull["arrowdown_"+d]!=null&&this._removeArrow){this._removeArrow("arrowdown_"+d)}this.idPull["polygon_"+k[b]]=null;delete this.idPull["polygon_"+k[b]]}}k=null;if(this.conf.skin=="dhx_terrace"&&arguments.length==1){this._improveTerraceSkin()}};dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(h,a,c,g,d,b,f){var e={id:h,title:c,imgen:(b!=null?b:""),imgdis:(f!=null?f:""),type:g,state:(d==true?"disabled":"enabled"),parent:a,complex:false,hotkey:"",tip:""};this.itemPull[e.id]=e};dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.conf.context=true;if(this.base._autoSkinUpdate==true){this.base.className=this.base.className.replace("dhtmlxMenu_"+this.conf.skin+"_Middle","");this.base._autoSkinUpdate=false}if(this.conf.ctx_baseid!=null){this.addContextZone(this.conf.ctx_baseid)}};dhtmlXMenuObject.prototype.addContextZone=function(b){if(b==document.body){b="document.body."+this.idPrefix;var d=document.body}else{if(typeof(b)=="string"){var d=document.getElementById(b)}else{var d=b}}var f=false;for(var c in this.conf.ctx_zones){f=f||(c==b)||(this.conf.ctx_zones[c]==d)}if(f==true){return false}this.conf.ctx_zones[b]=d;var e=this;if(window.dhx4.isOpera){this.operaContext=function(a){e._doOnContextMenuOpera(a,e)};d.addEventListener("mouseup",this.operaContext,false)}else{if(d.oncontextmenu!=null&&!d._oldContextMenuHandler){d._oldContextMenuHandler=d.oncontextmenu}d.oncontextmenu=function(g){for(var a in dhtmlXMenuObject.prototype.liveInst){if(a!=e.conf.live_id){if(dhtmlXMenuObject.prototype.liveInst[a].context){dhtmlXMenuObject.prototype.liveInst[a]._hideContextMenu()}}}g=g||event;g.cancelBubble=true;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}e._doOnContextBeforeCall(g,this);return false}}};dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(c,a){for(var b in dhtmlXMenuObject.prototype.liveInst){if(b!=a.conf.live_id){if(dhtmlXMenuObject.prototype.liveInst[b].context){dhtmlXMenuObject.prototype.liveInst[b]._hideContextMenu()}}}c.cancelBubble=true;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}if(c.button==0&&c.ctrlKey==true){a._doOnContextBeforeCall(c,this)}return false};dhtmlXMenuObject.prototype.removeContextZone=function(a){if(!this.isContextZone(a)){return false}if(a==document.body){a="document.body."+this.idPrefix}var b=this.conf.ctx_zones[a];if(window.dhx4.isOpera){b.removeEventListener("mouseup",this.operaContext,false)}else{b.oncontextmenu=(b._oldContextMenuHandler!=null?b._oldContextMenuHandler:null);b._oldContextMenuHandler=null}try{this.conf.ctx_zones[a]=null;delete this.conf.ctx_zones[a]}catch(c){}return true};dhtmlXMenuObject.prototype.isContextZone=function(a){if(a==document.body&&this.conf.ctx_zones["document.body."+this.idPrefix]!=null){return true}var b=false;if(this.conf.ctx_zones[a]!=null){if(this.conf.ctx_zones[a]==document.getElementById(a)){b=true}}return b};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null){return false}return(this.idPull["polygon_"+this.idPrefix+this.topId].style.display=="")};dhtmlXMenuObject.prototype._showContextMenu=function(b,c,a){this._clearAndHide();if(this.idPull["polygon_"+this.idPrefix+this.topId]==null){return false}window.clearTimeout(this.conf.tm_handler);this.idPull[this.idPrefix+this.topId]=new Array(b,c);this._showPolygon(this.idPrefix+this.topId,"bottom");this.callEvent("onContextMenu",[a])};dhtmlXMenuObject.prototype._hideContextMenu=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null){return false}this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId)};dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(f,h){this.conf.ctx_zoneid=h.id;this._clearAndHide();this._hideContextMenu();var d=(f.srcElement||f.target);var b=(window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML?f.offsetX:f.layerX);var a=(window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML?f.offsetY:f.layerY);var g=window.dhx4.absLeft(d)+b;var c=window.dhx4.absTop(d)+a;if(this.checkEvent("onBeforeContextMenu")){if(this.callEvent("onBeforeContextMenu",[h.id,f])){if(this.conf.ctx_autoshow){this._showContextMenu(g,c,h.id);this.callEvent("onAfterContextMenu",[h.id,f])}}}else{if(this.conf.ctx_autoshow){this._showContextMenu(g,c,h.id);this.callEvent("onAfterContextMenu",[h.id])}}};dhtmlXMenuObject.prototype.showContextMenu=function(a,b){this._showContextMenu(a,b,false)};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()};dhtmlXMenuObject.prototype.setAutoShowMode=function(a){this.conf.ctx_autoshow=(a==true?true:false)};dhtmlXMenuObject.prototype.setAutoHideMode=function(a){this.conf.ctx_autohide=(a==true?true:false)};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(a){this.conf.ctx_hideall=(a==true?true:false)};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.conf.ctx_hideall};dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var d in this.itemPull){if(this.itemPull[d].parent==this.idPrefix+this.topId&&this.idPull[d]!=null){var f=false;var e=false;if(this.idPull[d].parentNode.firstChild==this.idPull[d]){f=true}if(this.idPull[d].parentNode.lastChild==this.idPull[d]){e=true}for(var c in this.itemPull){if(this.itemPull[c].type=="separator"&&this.itemPull[c].parent==this.idPrefix+this.topId){if(this.idPull[d].nextSibling==this.idPull["separator_"+c]){e=true}if(this.idPull[d].previousSibling==this.idPull["separator_"+c]){f=true}}}this.idPull[d].style.borderLeftWidth=(f?"1px":"0px");this.idPull[d].style.borderTopLeftRadius=this.idPull[d].style.borderBottomLeftRadius=(f?"3px":"0px");this.idPull[d].style.borderTopRightRadius=this.idPull[d].style.borderBottomRightRadius=(e?"3px":"0px");this.idPull[d]._bl=f;this.idPull[d]._br=e}}};dhtmlXMenuObject.prototype._improveTerraceButton=function(b,a){if(a){this.idPull[b].style.borderBottomLeftRadius=(this.idPull[b]._bl?"3px":"0px");this.idPull[b].style.borderBottomRightRadius=(this.idPull[b]._br?"3px":"0px")}else{this.idPull[b].style.borderBottomLeftRadius="0px";this.idPull[b].style.borderBottomRightRadius="0px"}};if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype._createNode_menu=function(e,b,d,a,c){if(typeof(c)!="undefined"){e=c}else{e=document.createElement("DIV");e.className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders");e.appendChild(document.createElement("DIV"))}this.cell.insertBefore(e,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]);this.conf.ofs_nodes.t.menu=true;this._updateIdx();return e};dhtmlXCellObject.prototype.attachMenu=function(a){if(this.dataNodes.menu){return}if(typeof(a)=="undefined"){a={}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=this._attachObject("menu").firstChild;this.dataNodes.menu=new dhtmlXMenuObject(a);this._adjustCont(this._idd);a.parent=null;a=null;return this.dataNodes.menu};dhtmlXCellObject.prototype.detachMenu=function(){if(!this.dataNodes.menu){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;delete this.dataNodes.menu;this._detachObject("menu")};dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")};dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")};dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu}}dhtmlXMenuObject.prototype.loadXML=function(a,b){this.loadStruct(a,b)};dhtmlXMenuObject.prototype.loadXMLString=function(b,a){this.loadStruct(b,a)};dhtmlXMenuObject.prototype.setIconPath=function(a){this.setIconsPath(a)};dhtmlXMenuObject.prototype.setImagePath=function(){};dhtmlXMenuObject.prototype.setItemEnabled=function(a){this._changeItemState(a,"enabled",this._getItemLevelType(a))};dhtmlXMenuObject.prototype.setItemDisabled=function(a){this._changeItemState(a,"disabled",this._getItemLevelType(a))};dhtmlXMenuObject.prototype.isItemEnabled=function(a){return(this.itemPull[this.idPrefix+a]!=null?(this.itemPull[this.idPrefix+a]["state"]=="enabled"):false)};dhtmlXMenuObject.prototype._changeItemState=function(e,d,b){var c=false;var a=this.idPrefix+e;if((this.itemPull[a]!=null)&&(this.idPull[a]!=null)){if(this.itemPull[a]["state"]!=d){this.itemPull[a]["state"]=d;if(this.itemPull[a]["parent"]==this.idPrefix+this.topId&&!this.conf.context){this.idPull[a].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+(this.itemPull[a]["state"]=="enabled"?"Normal":"Disabled")}else{this.idPull[a].className="sub_item"+(this.itemPull[a]["state"]=="enabled"?"":"_dis")}this._updateItemComplexState(this.idPrefix+e,this.itemPull[this.idPrefix+e]["complex"],false);this._updateItemImage(e,b);if((this.idPrefix+this.conf.last_click==a)&&(b!="TopLevel")){this._redistribSubLevelSelection(a,this.itemPull[a]["parent"])}if(b=="TopLevel"&&!this.conf.context){}}}return c};dhtmlXMenuObject.prototype.getItemText=function(a){return(this.itemPull[this.idPrefix+a]!=null?this.itemPull[this.idPrefix+a]["title"]:"")};dhtmlXMenuObject.prototype.setItemText=function(f,d){f=this.idPrefix+f;if((this.itemPull[f]!=null)&&(this.idPull[f]!=null)){this._clearAndHide();this.itemPull[f]["title"]=d;if(this.itemPull[f]["parent"]==this.idPrefix+this.topId&&!this.conf.context){var c=null;for(var a=0;a<this.idPull[f].childNodes.length;a++){try{if(this.idPull[f].childNodes[a].className=="top_level_text"){c=this.idPull[f].childNodes[a]}}catch(b){}}if(String(this.itemPull[f]["title"]).length==""||this.itemPull[f]["title"]==null){if(c!=null){c.parentNode.removeChild(c)}}else{if(!c){c=document.createElement("DIV");c.className="top_level_text";if(this.conf.rtl&&this.idPull[f].childNodes.length>0){this.idPull[f].insertBefore(c,this.idPull[f].childNodes[0])}else{this.idPull[f].appendChild(c)}}c.innerHTML=this.itemPull[f]["title"]}}else{var c=null;for(var a=0;a<this.idPull[f].childNodes[1].childNodes.length;a++){if(String(this.idPull[f].childNodes[1].childNodes[a].className||"")=="sub_item_text"){c=this.idPull[f].childNodes[1].childNodes[a]}}if(String(this.itemPull[f]["title"]).length==""||this.itemPull[f]["title"]==null){if(c){c.parentNode.removeChild(c);c=null;this.idPull[f].childNodes[1].innerHTML="&nbsp;"}}else{if(!c){c=document.createElement("DIV");c.className="sub_item_text";this.idPull[f].childNodes[1].innerHTML="";this.idPull[f].childNodes[1].appendChild(c)}c.innerHTML=this.itemPull[f]["title"]}}}};dhtmlXMenuObject.prototype.loadFromHTML=function(c,f,d){var b=this.conf.tags.item;this.conf.tags.item="div";var e=(typeof(c)=="string"?document.getElementById(c):c);var a=this._xmlToJson(e,this.idPrefix+this.topId);this._initObj(a);this.conf.tags.item=b;if(f){e.parentNode.removeChild(e)}e=objOd=null;if(onload!=null){if(typeof(d)=="function"){d()}else{if(typeof(window[d])=="function"){window[d]()}}}};dhtmlXMenuObject.prototype.hideItem=function(a){this._changeItemVisible(a,false)};dhtmlXMenuObject.prototype.showItem=function(a){this._changeItemVisible(a,true)};dhtmlXMenuObject.prototype.isItemHidden=function(b){var a=null;if(this.idPull[this.idPrefix+b]!=null){a=(this.idPull[this.idPrefix+b].style.display=="none")}return a};dhtmlXMenuObject.prototype._changeItemVisible=function(c,b){var a=this.idPrefix+c;if(this.itemPull[a]==null){return}if(this.itemPull[a]["type"]=="separator"){a="separator_"+a}if(this.idPull[a]==null){return}this.idPull[a].style.display=(b?"":"none");this._redefineComplexState(this.itemPull[this.idPrefix+c]["parent"])};dhtmlXMenuObject.prototype.setUserData=function(c,a,b){this.userData[this.idPrefix+c+"_"+a]=b};dhtmlXMenuObject.prototype.getUserData=function(b,a){return(this.userData[this.idPrefix+b+"_"+a]!=null?this.userData[this.idPrefix+b+"_"+a]:null)};dhtmlXMenuObject.prototype.setOpenMode=function(a){this.conf.mode=(a=="win"?"win":"web")};dhtmlXMenuObject.prototype.setWebModeTimeout=function(a){this.conf.tm_sec=(!isNaN(a)?a:400)};dhtmlXMenuObject.prototype.getItemImage=function(b){var a=new Array(null,null);b=this.idPrefix+b;if(this.itemPull[b]["type"]=="item"){a[0]=this.itemPull[b]["imgen"];a[1]=this.itemPull[b]["imgdis"]}return a};dhtmlXMenuObject.prototype.setItemImage=function(c,a,b){if(this.itemPull[this.idPrefix+c]["type"]!="item"){return}this.itemPull[this.idPrefix+c]["imgen"]=a;this.itemPull[this.idPrefix+c]["imgdis"]=b;this._updateItemImage(c,this._getItemLevelType(c))};dhtmlXMenuObject.prototype.clearItemImage=function(a){this.setItemImage(a,"","")};dhtmlXMenuObject.prototype.setVisibleArea=function(b,a,d,c){this.conf.v_enabled=true;this.conf.v.x1=b;this.conf.v.x2=a;this.conf.v.y1=d;this.conf.v.y2=c};dhtmlXMenuObject.prototype.setTooltip=function(b,a){b=this.idPrefix+b;if(!(this.itemPull[b]!=null&&this.idPull[b]!=null)){return}this.idPull[b].title=(a.length>0?a:null);this.itemPull[b]["tip"]=a};dhtmlXMenuObject.prototype.getTooltip=function(a){if(this.itemPull[this.idPrefix+a]==null){return null}return this.itemPull[this.idPrefix+a]["tip"]};dhtmlXMenuObject.prototype.setTopText=function(a){if(this.conf.context){return}if(this._topText==null){this._topText=document.createElement("DIV");this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.rtl?"left":(this.conf.align=="left"?"right":"left"));this.base.appendChild(this._topText)}this._topText.innerHTML=a};dhtmlXMenuObject.prototype.setAlign=function(a){if(this.conf.align==a){return}if(a=="left"||a=="right"){this.conf.align=a;if(this.cont){this.cont.className=(this.conf.align=="right"?"align_right":"align_left")}if(this._topText!=null){this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.align=="left"?"right":"left")}}};dhtmlXMenuObject.prototype.setHref=function(c,a,b){if(this.itemPull[this.idPrefix+c]==null){return}this.itemPull[this.idPrefix+c]["href_link"]=a;if(b!=null){this.itemPull[this.idPrefix+c]["href_target"]=b}};dhtmlXMenuObject.prototype.clearHref=function(a){if(this.itemPull[this.idPrefix+a]==null){return}delete this.itemPull[this.idPrefix+a]["href_link"];delete this.itemPull[this.idPrefix+a]["href_target"]};dhtmlXMenuObject.prototype.getCircuit=function(b){var a=new Array(b);while(this.getParentId(b)!=this.topId){b=this.getParentId(b);a[a.length]=b}return a.reverse()};dhtmlXMenuObject.prototype._getCheckboxState=function(a){if(this.itemPull[this.idPrefix+a]==null){return null}return this.itemPull[this.idPrefix+a]["checked"]};dhtmlXMenuObject.prototype._setCheckboxState=function(b,a){if(this.itemPull[this.idPrefix+b]==null){return}this.itemPull[this.idPrefix+b]["checked"]=a};dhtmlXMenuObject.prototype._updateCheckboxImage=function(b){if(this.idPull[this.idPrefix+b]==null){return}this.itemPull[this.idPrefix+b]["imgen"]="chbx_"+(this._getCheckboxState(b)?"1":"0");this.itemPull[this.idPrefix+b]["imgdis"]=this.itemPull[this.idPrefix+b]["imgen"];try{this.idPull[this.idPrefix+b].childNodes[(this.conf.rtl?2:0)].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+b]["imgen"]}catch(a){}};dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(d,a,b){if(a.charAt(1)=="d"){return}if(this.itemPull[this.idPrefix+d]==null){return}var c=this._getCheckboxState(d);if(this.checkEvent("onCheckboxClick")){if(this.callEvent("onCheckboxClick",[d,c,this.conf.ctx_zoneid,b])){this.setCheckboxState(d,!c)}}else{this.setCheckboxState(d,!c)}if(this.checkEvent("onClick")){this.callEvent("onClick",[d])}};dhtmlXMenuObject.prototype.setCheckboxState=function(b,a){this._setCheckboxState(b,a);this._updateCheckboxImage(b)};dhtmlXMenuObject.prototype.getCheckboxState=function(a){return this._getCheckboxState(a)};dhtmlXMenuObject.prototype.addCheckbox=function(h,d,j,k,l,a,e){if(this.conf.context&&d==this.topId){}else{if(this.itemPull[this.idPrefix+d]==null){return}if(h=="child"&&this.itemPull[this.idPrefix+d]["type"]!="item"){return}}var f="chbx_"+(a?"1":"0");var c=f;if(h=="sibling"){var b=this.idPrefix+(k!=null?k:this._genStr(24));var g=this.idPrefix+this.getParentId(d);this._addItemIntoGlobalStrorage(b,g,l,"checkbox",e,f,c);this.itemPull[b]["checked"]=a;this._renderSublevelItem(b,this.getItemPosition(d))}else{var b=this.idPrefix+(k!=null?k:this._genStr(24));var g=this.idPrefix+d;this._addItemIntoGlobalStrorage(b,g,l,"checkbox",e,f,c);this.itemPull[b]["checked"]=a;if(this.idPull["polygon_"+g]==null){this._renderSublevelPolygon(g,g)}this._renderSublevelItem(b,j-1);this._redefineComplexState(g)}};dhtmlXMenuObject.prototype.setHotKey=function(g,a){g=this.idPrefix+g;if(!(this.itemPull[g]!=null&&this.idPull[g]!=null)){return}if(this.itemPull[g]["parent"]==this.idPrefix+this.topId&&!this.conf.context){return}if(this.itemPull[g]["complex"]){return}var b=this.itemPull[g]["type"];if(!(b=="item"||b=="checkbox"||b=="radio")){return}var f=null;try{if(this.idPull[g].childNodes[this.conf.rtl?0:2].childNodes[0].className=="sub_item_hk"){f=this.idPull[g].childNodes[this.conf.rtl?0:2].childNodes[0]}}catch(d){}if(a.length==0){this.itemPull[g]["hotkey_backup"]=this.itemPull[g]["hotkey"];this.itemPull[g]["hotkey"]="";if(f!=null){f.parentNode.removeChild(f)}}else{this.itemPull[g]["hotkey"]=a;this.itemPull[g]["hotkey_backup"]=null;if(f==null){f=document.createElement("DIV");f.className="sub_item_hk";var c=this.idPull[g].childNodes[this.conf.rtl?0:2];while(c.childNodes.length>0){c.removeChild(c.childNodes[0])}c.appendChild(f)}f.innerHTML=a}};dhtmlXMenuObject.prototype.getHotKey=function(a){if(this.itemPull[this.idPrefix+a]==null){return null}return this.itemPull[this.idPrefix+a]["hotkey"]};dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(a){var c=this._getSubItemToDeselectByPolygon(a);for(var b=0;b<this.conf.opened_poly.length;b++){if(this.conf.opened_poly[b]!=a){this._hidePolygon(this.conf.opened_poly[b])}}for(var b=0;b<c.length;b++){if(this.idPull[c[b]]!=null&&this.itemPull[c[b]]["state"]=="enabled"){this.idPull[c[b]].className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Item_Normal"}}};dhtmlXMenuObject.prototype._checkArrowsState=function(d){var b=this.idPull["polygon_"+d].childNodes[1];var c=this.idPull["arrowup_"+d];var a=this.idPull["arrowdown_"+d];if(b.scrollTop==0){c.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp_Disabled"}else{c.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp"+(c.over?"_Over":"")}if(b.scrollTop+b.offsetHeight<b.scrollHeight){a.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown"+(a.over?"_Over":"")}else{a.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown_Disabled"}b=c=a=null};dhtmlXMenuObject.prototype._addUpArrow=function(d){var b=this;var c=document.createElement("DIV");c.pId=this.idPrefix+d;c.id="arrowup_"+this.idPrefix+d;c.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp";c.over=false;c.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false};c.oncontextmenu=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false};c.onmouseover=function(){if(b.conf.mode=="web"){window.clearTimeout(b.conf.tm_handler)}b._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className=="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp_Disabled"){return}this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp_Over";this.over=true;b._canScrollUp=true;b._doScrollUp(this.pId,true)};c.onmouseout=function(){if(b.conf.mode=="web"){window.clearTimeout(b.conf.tm_handler);b.conf.tm_handler=window.setTimeout(function(){b._clearAndHide()},b.conf.tm_sec,"JavaScript")}this.over=false;b._canScrollUp=false;if(this.className=="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp_Disabled"){return}this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp";window.clearTimeout(b.conf.of_utm)};c.onclick=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}f.cancelBubble=true;return false};var a=this.idPull["polygon_"+this.idPrefix+d];a.childNodes[0].appendChild(c);this.idPull[c.id]=c;a=c=null};dhtmlXMenuObject.prototype._addDownArrow=function(d){var b=this;var c=document.createElement("DIV");c.pId=this.idPrefix+d;c.id="arrowdown_"+this.idPrefix+d;c.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown";c.over=false;c.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false};c.oncontextmenu=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false};c.onmouseover=function(){if(b.conf.mode=="web"){window.clearTimeout(b.conf.tm_handler)}b._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className=="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown_Disabled"){return}this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown_Over";this.over=true;b._canScrollDown=true;b._doScrollDown(this.pId,true)};c.onmouseout=function(){if(b.conf.mode=="web"){window.clearTimeout(b.conf.tm_handler);b.conf.tm_handler=window.setTimeout(function(){b._clearAndHide()},b.conf.tm_sec,"JavaScript")}this.over=false;b._canScrollDown=false;if(this.className=="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown_Disabled"){return}this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown";window.clearTimeout(b.conf.of_dtm)};c.onclick=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}f.cancelBubble=true;return false};var a=this.idPull["polygon_"+this.idPrefix+d];a.childNodes[2].appendChild(c);this.idPull[c.id]=c;a=c=null};dhtmlXMenuObject.prototype._removeUpArrow=function(b){var a="arrowup_"+this.idPrefix+b;this._removeArrow(a)};dhtmlXMenuObject.prototype._removeDownArrow=function(b){var a="arrowdown_"+this.idPrefix+b;this._removeArrow(a)};dhtmlXMenuObject.prototype._removeArrow=function(a){var b=this.idPull[a];b.onselectstart=null;b.oncontextmenu=null;b.onmouseover=null;b.onmouseout=null;b.onclick=null;if(b.parentNode){b.parentNode.removeChild(b)}b=null;this.idPull[a]=null;try{delete this.idPull[a]}catch(c){}};dhtmlXMenuObject.prototype._isArrowExists=function(a){if(this.idPull["arrowup_"+a]!=null&&this.idPull["arrowdown_"+a]!=null){return true}return false};dhtmlXMenuObject.prototype._doScrollUp=function(f,d){var a=this.idPull["polygon_"+f].childNodes[1];if(this._canScrollUp&&a.scrollTop>0){var c=false;var e=a.scrollTop-this.conf.of_ustep;if(e<0){c=true;e=0}a.scrollTop=e;if(!c){var b=this;this.conf.of_utm=window.setTimeout(function(){b._doScrollUp(f,false);b=null},this.conf.of_utime)}else{d=true}}else{this._canScrollUp=false;this._checkArrowsState(f)}if(d){this._checkArrowsState(f)}};dhtmlXMenuObject.prototype._doScrollDown=function(f,d){var a=this.idPull["polygon_"+f].childNodes[1];if(this._canScrollDown&&a.scrollTop+a.offsetHeight<=a.scrollHeight){var c=false;var e=a.scrollTop+this.conf.of_dstep;if(e+a.offsetHeight>=a.scrollHeight){c=true;e=a.scrollHeight-a.offsetHeight}a.scrollTop=e;if(!c){var b=this;this.conf.of_dtm=window.setTimeout(function(){b._doScrollDown(f,false);b=null},this.conf.of_dtime)}else{d=true}}else{this._canScrollDown=false;this._checkArrowsState(f)}if(d){this._checkArrowsState(f)}};dhtmlXMenuObject.prototype._countPolygonItems=function(f){var d=0;for(var b in this.itemPull){var c=this.itemPull[b]["parent"];var e=this.itemPull[b]["type"];if(c==this.idPrefix+f&&(e=="item"||e=="radio"||e=="checkbox")){d++}}return d};dhtmlXMenuObject.prototype.setOverflowHeight=function(e){if(e==="auto"){this.conf.overflow_limit=0;this.conf.auto_overflow=true;return}if(this.conf.overflow_limit==0&&e<=0){return}this._clearAndHide();if(this.conf.overflow_limit>=0&&e>0){this.conf.overflow_limit=e;return}if(this.conf.overflow_limit>0&&e<=0){for(var d in this.itemPull){if(this._isArrowExists(d)){var c=String(d).replace(this.idPrefix,"");this._removeUpArrow(c);this._removeDownArrow(c);this.idPull["polygon_"+d].childNodes[1].style.height=""}}this.conf.overflow_limit=0;return}};dhtmlXMenuObject.prototype._getRadioImgObj=function(c){try{var a=this.idPull[this.idPrefix+c].childNodes[(this.conf.rtl?2:0)].childNodes[0]}catch(b){var a=null}return a};dhtmlXMenuObject.prototype._setRadioState=function(d,c){var b=this._getRadioImgObj(d);if(b!=null){var a=this.itemPull[this.idPrefix+d];a.checked=c;a.imgen="rdbt_"+(a.checked?"1":"0");a.imgdis=a.imgen;b.className="sub_icon "+a.imgen}};dhtmlXMenuObject.prototype._radioOnClickHandler=function(d,a,b){if(a.charAt(1)=="d"||this.itemPull[this.idPrefix+d]["group"]==null){return}var c=this.itemPull[this.idPrefix+d]["group"];if(this.checkEvent("onRadioClick")){if(this.callEvent("onRadioClick",[c,this.getRadioChecked(c),d,this.conf.ctx_zoneid,b])){this.setRadioChecked(c,d)}}else{this.setRadioChecked(c,d)}if(this.checkEvent("onClick")){this.callEvent("onClick",[d])}};dhtmlXMenuObject.prototype.getRadioChecked=function(d){var f=null;for(var c=0;c<this.radio[d].length;c++){var e=this.radio[d][c].replace(this.idPrefix,"");var a=this._getRadioImgObj(e);if(a!=null){var b=(a.className).match(/rdbt_1$/gi);if(b!=null){f=e}}}return f};dhtmlXMenuObject.prototype.setRadioChecked=function(b,d){if(this.radio[b]==null){return}for(var a=0;a<this.radio[b].length;a++){var c=this.radio[b][a].replace(this.idPrefix,"");this._setRadioState(c,(c==d))}};dhtmlXMenuObject.prototype.addRadioButton=function(j,e,k,l,m,n,a,f){if(this.conf.context&&e==this.topId){}else{if(this.itemPull[this.idPrefix+e]==null){return}if(j=="child"&&this.itemPull[this.idPrefix+e]["type"]!="item"){return}}var c=this.idPrefix+(l!=null?l:this._genStr(24));var g="rdbt_"+(a?"1":"0");var b=g;if(j=="sibling"){var h=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(c,h,m,"radio",f,g,b);this._renderSublevelItem(c,this.getItemPosition(e))}else{var h=this.idPrefix+e;this._addItemIntoGlobalStrorage(c,h,m,"radio",f,g,b);if(this.idPull["polygon_"+h]==null){this._renderSublevelPolygon(h,h)}this._renderSublevelItem(c,k-1);this._redefineComplexState(h)}var d=(n!=null?n:this._genStr(24));this.itemPull[c]["group"]=d;if(this.radio[d]==null){this.radio[d]=new Array()}this.radio[d][this.radio[d].length]=c;if(a==true){this.setRadioChecked(d,String(c).replace(this.idPrefix,""))}};dhtmlXMenuObject.prototype.serialize=function(){var a="<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>";return a};dhtmlXMenuObject.prototype._readLevel=function(d){var e="";for(var j in this.itemPull){if(this.itemPull[j]["parent"]==d){var b="";var c="";var l="";var h=String(this.itemPull[j]["id"]).replace(this.idPrefix,"");var g="";var k=(this.itemPull[j]["title"]!=""?' text="'+this.itemPull[j]["title"]+'"':"");var f="";if(this.itemPull[j]["type"]=="item"){if(this.itemPull[j]["imgen"]!=""){b=' img="'+this.itemPull[j]["imgen"]+'"'}if(this.itemPull[j]["imgdis"]!=""){c=' imgdis="'+this.itemPull[j]["imgdis"]+'"'}if(this.itemPull[j]["hotkey"]!=""){l="<hotkey>"+this.itemPull[j]["hotkey"]+"</hotkey>"}}if(this.itemPull[j]["type"]=="separator"){g=' type="separator"'}else{if(this.itemPull[j]["state"]=="disabled"){f=' enabled="false"'}}if(this.itemPull[j]["type"]=="checkbox"){g=' type="checkbox"'+(this.itemPull[j]["checked"]?' checked="true"':"")}if(this.itemPull[j]["type"]=="radio"){g=' type="radio" group="'+this.itemPull[j]["group"]+'" '+(this.itemPull[j]["checked"]?' checked="true"':"")}e+="<item id='"+h+"'"+k+g+b+c+f+">";e+=l;if(this.itemPull[j]["complex"]){e+=this._readLevel(j)}e+="</item>"}}return e};function xmlPointer(a){this.d=a}xmlPointer.prototype={text:function(){if(!_isFF){return this.d.xml}var a=new XMLSerializer();return a.serializeToString(this.d)},get:function(a){return this.d.getAttribute(a)},exists:function(){return !!this.d},content:function(){return this.d.firstChild?(this.d.firstChild.wholeText||this.d.firstChild.data):""},each:function(d,h,g,e){var b=this.d.childNodes;var j=new xmlPointer();if(b.length){for(e=e||0;e<b.length;e++){if(b[e].tagName==d){j.d=b[e];if(h.apply(g,[j,e])==-1){return}}}}},get_all:function(){var d={};var c=this.d.attributes;for(var e=0;e<c.length;e++){d[c[e].name]=c[e].value}return d},sub:function(d){var b=this.d.childNodes;var f=new xmlPointer();if(b.length){for(var e=0;e<b.length;e++){if(b[e].tagName==d){f.d=b[e];return f}}}},up:function(a){return new xmlPointer(this.d.parentNode)},set:function(a,b){this.d.setAttribute(a,b)},clone:function(a){return new xmlPointer(this.d)},sub_exists:function(c){var b=this.d.childNodes;if(b.length){for(var d=0;d<b.length;d++){if(b[d].tagName==c){return true}}}return false},through:function(b,h,l,e,m){var j=this.d.childNodes;if(j.length){for(var d=0;d<j.length;d++){if(j[d].tagName==b&&j[d].getAttribute(h)!=null&&j[d].getAttribute(h)!=""&&(!l||j[d].getAttribute(h)==l)){var g=new xmlPointer(j[d]);e.apply(m,[g,d])}var k=this.d;this.d=j[d];this.through(b,h,l,e,m);this.d=k}}}};function dhtmlXTreeObject(g,d,b,a){if(dhtmlxEvent.initTouch){dhtmlxEvent.initTouch()}if(_isIE){try{document.execCommand("BackgroundImageCache",false,true)}catch(f){}}if(typeof(g)!="object"){this.parentObject=document.getElementById(g)}else{this.parentObject=g}this.parentObject.style.overflow="hidden";this._itim_dg=true;this.dlmtr=",";this.dropLower=false;this.enableIEImageFix(true);this.xmlstate=0;this.mytype="tree";this.smcheck=true;this.width=d;this.height=b;this.rootId=a;this.childCalc=null;this.def_img_x="18px";this.def_img_y="18px";this.def_line_img_x="18px";this.def_line_img_y="24px";this._dragged=new Array();this._selected=new Array();this.style_pointer="pointer";this._aimgs=true;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.cMenu=0;this.mlitems=0;this.iconURL="";this.dadmode=0;this.slowParse=false;this.autoScroll=true;this.hfMode=0;this.nodeCut=new Array();this.XMLsource=0;this.XMLloadingWarning=0;this._idpull={};this._pullSize=0;this.treeLinesOn=true;this.tscheck=false;this.timgen=true;this.dpcpy=false;this._ld_id=null;this._dynDeleteBranches={};this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||"";this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif");this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif");this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif");this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif");this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif");this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif");this.cutImg=new Array(0,0,0);this.cutImage="but_cut.gif";dhx4._eventable(this);this.dragger=new dhtmlDragAndDropObject();this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}if(_isFF){this.allTree.childNodes[0].width="100%";this.allTree.childNodes[0].style.overflow="hidden"}var c=this;this.allTree.onselectstart=new Function("return false;");if(_isMacOS){this.allTree.oncontextmenu=function(h){return c._doContClick(h||window.event,true)}}this.allTree.onmousedown=function(h){return c._doContClick(h||window.event)};this.XMLLoader=this._parseXMLTree;if(_isIE){this.preventIECashing(true)}this.selectionBar=document.createElement("DIV");this.selectionBar.className="selectionBar";this.selectionBar.innerHTML="&nbsp;";this.selectionBar.style.display="none";this.allTree.appendChild(this.selectionBar);if(window.addEventListener){window.addEventListener("unload",function(){try{c.destructor()}catch(h){}},false)}if(window.attachEvent){window.attachEvent("onunload",function(){try{c.destructor()}catch(h){}})}this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path)}this.setSkin(window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtree")||"dhx_skyblue");return this}dhtmlXTreeObject.prototype.setDataMode=function(a){this._datamode=a};dhtmlXTreeObject.prototype._doContClick=function(g,a){if(!a&&g.button!=2){if(this._acMenu){if(this._acMenu.hideContextMenu){this._acMenu.hideContextMenu()}else{this.cMenu._contextEnd()}}return true}var b=(_isIE?g.srcElement:g.target);while((b)&&(b.tagName!="BODY")){if(b.parentObject){break}b=b.parentNode}if((!b)||(!b.parentObject)){return true}var e=b.parentObject;if(!this.callEvent("onRightClick",[e.id,g])){(g.srcElement||g.target).oncontextmenu=function(k){(k||event).cancelBubble=true;return false}}this._acMenu=(e.cMenu||this.cMenu);if(this._acMenu){if(!(this.callEvent("onBeforeContextMenu",[e.id]))){return true}if(!_isMacOS){(g.srcElement||g.target).oncontextmenu=function(k){(k||event).cancelBubble=true;return false}}if(this._acMenu.showContextMenu){var d=window.document.documentElement;var c=window.document.body;var h=new Array((d.scrollLeft||c.scrollLeft),(d.scrollTop||c.scrollTop));if(_isIE){var j=g.clientX+h[0];var f=g.clientY+h[1]}else{var j=g.pageX;var f=g.pageY}this._acMenu.showContextMenu(j-1,f-1);this.contextID=e.id;g.cancelBubble=true;this._acMenu._skip_hide=true}else{b.contextMenuId=e.id;b.contextMenu=this._acMenu;b.a=this._acMenu._contextStart;b.a(b,g);b.a=null}return false}return true};dhtmlXTreeObject.prototype.enableIEImageFix=function(a){if(!a){this._getImg=function(b){return document.createElement((b==this.rootId)?"div":"img")};this._setSrc=function(d,c){d.src=c};this._getSrc=function(b){return b.src}}else{this._getImg=function(){var b=document.createElement("DIV");b.innerHTML="&nbsp;";b.className="dhx_bg_img_fix";return b};this._setSrc=function(d,c){d.style.backgroundImage="url("+c+")"};this._getSrc=function(b){var c=b.style.backgroundImage;return c.substr(4,c.length-5).replace(/(^")|("$)/g,"")}}};dhtmlXTreeObject.prototype.destructor=function(){for(var b in this._idpull){var c=this._idpull[b];if(!c){continue}c.parentObject=null;c.treeNod=null;c.childNodes=null;c.span=null;c.tr.nodem=null;c.tr=null;c.htmlNode.objBelong=null;c.htmlNode=null;this._idpull[b]=null}this.parentObject.innerHTML="";this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(var b in this){this[b]=null}};function cObject(){return this}cObject.prototype=new Object;cObject.prototype.clone=function(){function a(){}a.prototype=this;return new a()};function dhtmlXTreeItemObject(f,b,c,a,d,e){this.htmlNode="";this.acolor="";this.scolor="";this.tr=0;this.childsCount=0;this.tempDOMM=0;this.tempDOMU=0;this.dragSpan=0;this.dragMove=0;this.span=0;this.closeble=1;this.childNodes=new Array();this.userData=new cObject();this.checkstate=0;this.treeNod=a;this.label=b;this.parentObject=c;this.actionHandler=d;this.images=new Array(a.imageArray[0],a.imageArray[1],a.imageArray[2]);this.id=a._globalIdStorageAdd(f,this);if(this.treeNod.checkBoxOff){this.htmlNode=this.treeNod._createItem(1,this,e)}else{this.htmlNode=this.treeNod._createItem(0,this,e)}this.htmlNode.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(b,a){if(this._globalIdStorageFind(b,1,1)){b=b+"_"+(new Date()).valueOf();return this._globalIdStorageAdd(b,a)}this._idpull[b]=a;this._pullSize++;return b};dhtmlXTreeObject.prototype._globalIdStorageSub=function(a){if(this._idpull[a]){this._unselectItem(this._idpull[a]);this._idpull[a]=null;this._pullSize--}if((this._locker)&&(this._locker[a])){this._locker[a]=false}};dhtmlXTreeObject.prototype._globalIdStorageFind=function(f,a,c,d){var e=this._idpull[f];if(e){if((e.unParsed)&&(!c)){this.reParse(e,0)}if(this._srnd&&!e.htmlNode){this._buildSRND(e,c)}if((d)&&(this._edsbpsA)){for(var b=0;b<this._edsbpsA.length;b++){if(this._edsbpsA[b][2]==f){dhx4.callEvent("ongetItemError",["Requested item still in parsing process.",f]);return null}}}return e}if((this.slowParse)&&(f!=0)&&(!a)){return this.preParse(f)}else{return null}};dhtmlXTreeObject.prototype._getSubItemsXML=function(a){var b=[];a.each("item",function(d){b.push(d.get("id"))},this);return b.join(this.dlmtr)};dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(a){this.slowParse=dhx4.s2b(a)};dhtmlXTreeObject.prototype.findXML=function(b,a,c){};dhtmlXTreeObject.prototype._getAllCheckedXML=function(b,a,d){var c=[];if(d==2){b.through("item","checked",-1,function(e){c.push(e.get("id"))},this)}if(d==1){b.through("item","id",null,function(e){if(e.get("checked")&&(e.get("checked")!=-1)){c.push(e.get("id"))}},this)}if(d==0){b.through("item","id",null,function(e){if(!e.get("checked")||e.get("checked")==0){c.push(e.get("id"))}},this)}if(c.length){return a+(a?this.dlmtr:"")+c.join(this.dlmtr)}if(a){return a}else{return""}};dhtmlXTreeObject.prototype._setSubCheckedXML=function(a,b){var c=a?"1":"";b.through("item","id",null,function(d){if(!d.get("disabled")||d.get("disabled")==0){d.set("checked",c)}},this)};dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(c,a){var d=[];var b=function(e){if(!e.sub_exists("item")){d.push(e.get("id"))}else{e.each("item",b,this)}};b(c);return d.join(",")};dhtmlXTreeObject.prototype._getAllFatItemsXML=function(c,a){var d=[];var b=function(e){if(!e.sub_exists("item")){return}d.push(e.get("id"));e.each("item",b,this)};b(c);return d.join(",")};dhtmlXTreeObject.prototype._getAllSubItemsXML=function(c,b,a){var b=[];a.through("item","id",null,function(d){b.push(d.get("id"))},this);return b.join(",")};dhtmlXTreeObject.prototype.reParse=function(c){var f=this;if(!this.parsCount){f.callEvent("onXLS",[f,c.id])}this.xmlstate=1;var d=c.unParsed;c.unParsed=0;this.XMLloadingWarning=1;var a=this.parsingOn;var g=this.waitUpdateXML;var h=this.parsedArray;this.parsedArray=new Array();this.waitUpdateXML=false;this.parsingOn=c.id;this.parsedArray=new Array();this.setCheckList="";this._parse(d,c.id,2);var j=this.setCheckList.split(this.dlmtr);for(var e=0;e<this.parsedArray.length;e++){c.htmlNode.childNodes[0].appendChild(this.parsedArray[e])}if(d.get("order")&&d.get("order")!="none"){this._reorderBranch(c,d.get("order"),true)}this.oldsmcheck=this.smcheck;this.smcheck=false;for(var b=0;b<j.length;b++){if(j[b]){this.setCheck(j[b],1)}}this.smcheck=this.oldsmcheck;this.parsingOn=a;this.waitUpdateXML=g;this.parsedArray=h;this.XMLloadingWarning=0;this._redrawFrom(this,c);if(this._srnd&&!c._sready){this.prepareSR(c.id)}this.xmlstate=0;return true};dhtmlXTreeObject.prototype.preParse=function(b){if(!b||!this._p){return null}var a=false;this._p.clone().through("item","id",b,function(d){this._globalIdStorageFind(d.up().get("id"));return a=true},this);if(a){var c=this._globalIdStorageFind(b,true,false);if(!c){dhx4.callEvent("ongetItemError",["The item "+b+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",b])}}return c};dhtmlXTreeObject.prototype._escape=function(a){switch(this.utfesc){case"none":return a;break;case"utf8":return encodeURIComponent(a);break;default:return escape(a);break}};dhtmlXTreeObject.prototype._drawNewTr=function(e,c){var d=document.createElement("tr");var b=document.createElement("td");var a=document.createElement("td");b.appendChild(document.createTextNode(" "));a.colSpan=3;a.appendChild(e);d.appendChild(b);d.appendChild(a);return d};dhtmlXTreeObject.prototype.parse=function(d,c,a){if(typeof c=="string"){a=c;c=null}if(a==="json"){return this._loadJSONObject(d,c)}else{if(a==="csv"){return this._loadCSVString(d,c)}else{if(a==="jsarray"){return this._loadJSArray(d,c)}}}var b=this;if(!this.parsCount){this.callEvent("onXLS",[b,null])}this.xmlstate=1;this.XMLLoader({responseXML:dhx4.ajax.parse(d)},c)};dhtmlXTreeObject.prototype.loadXMLString=function(){return this.parse.apply(this,arguments)};dhtmlXTreeObject.prototype.load=function(b,e,c){if(typeof e=="string"){c=e;e=null}c=c||this._datamode;if(c==="json"){return this._loadJSON(b,e)}else{if(c==="csv"){return this._loadCSV(b,e)}else{if(c==="jsarray"){return this._loadJSArrayFile(xmlString,e)}}}var d=this;if(!this.parsCount){this.callEvent("onXLS",[d,this._ld_id])}this._ld_id=null;this.xmlstate=1;this.XMLLoader=this._parseXMLTree;var a=this;dhx4.ajax.get(b,function(f){a.XMLLoader(f.xmlDoc,e);a=null})};dhtmlXTreeObject.prototype.loadXML=function(){if(window.console&&window.console.info){window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this.load.apply(this,arguments)};dhtmlXTreeObject.prototype._attachChildNode=function(g,f,d,h,v,u,s,j,c,m,o){if(m&&m.parentObject){g=m.parentObject}if(((g.XMLload==0)&&(this.XMLsource))&&(!this.XMLloadingWarning)){g.XMLload=1;this._loadDynXML(g.id)}var k=g.childsCount;var w=g.childNodes;if(o&&o.tr.previousSibling){if(o.tr.previousSibling.previousSibling){m=o.tr.previousSibling.nodem}else{j=j.replace("TOP","")+",TOP"}}if(m){var e,r;for(e=0;e<k;e++){if(w[e]==m){for(r=k;r!=e;r--){w[1+r]=w[r]}break}}e++;k=e}if(j){var p=j.split(",");for(var q=0;q<p.length;q++){switch(p[q]){case"TOP":if(g.childsCount>0){m=new Object;m.tr=g.childNodes[0].tr.previousSibling}g._has_top=true;for(e=k;e>0;e--){w[e]=w[e-1]}k=0;break}}}var l;if(!(l=this._idpull[f])||l.span!=-1){l=w[k]=new dhtmlXTreeItemObject(f,d,g,this,h,1);f=w[k].id;g.childsCount++}if(!l.htmlNode){l.label=d;l.htmlNode=this._createItem((this.checkBoxOff?1:0),l);l.htmlNode.objBelong=l}if(v){l.images[0]=v}if(u){l.images[1]=u}if(s){l.images[2]=s}var b=this._drawNewTr(l.htmlNode);if((this.XMLloadingWarning)||(this._hAdI)){l.htmlNode.parentNode.parentNode.style.display="none"}if((m)&&m.tr&&(m.tr.nextSibling)){g.htmlNode.childNodes[0].insertBefore(b,m.tr.nextSibling)}else{if(this.parsingOn==g.id){this.parsedArray[this.parsedArray.length]=b}else{g.htmlNode.childNodes[0].appendChild(b)}}if((m)&&(!m.span)){m=null}if(this.XMLsource){if((c)&&(c!=0)){l.XMLload=0}else{l.XMLload=1}}l.tr=b;b.nodem=l;if(g.itemId==0){b.childNodes[0].className="hiddenRow"}if((g._r_logic)||(this._frbtr)){this._setSrc(l.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0])}if(j){var p=j.split(",");for(var q=0;q<p.length;q++){switch(p[q]){case"SELECT":this.selectItem(f,false);break;case"CALL":this.selectItem(f,true);break;case"CHILD":l.XMLload=0;break;case"CHECKED":if(this.XMLloadingWarning){this.setCheckList+=this.dlmtr+f}else{this.setCheck(f,1)}break;case"HCHECKED":this._setCheck(l,"unsure");break;case"OPEN":l.openMe=1;break}}}if(!this.XMLloadingWarning){if((this._getOpenState(g)<0)&&(!this._hAdI)){this.openItem(g.id)}if(m){this._correctPlus(m);this._correctLine(m)}this._correctPlus(g);this._correctLine(g);this._correctPlus(l);if(g.childsCount>=2){this._correctPlus(w[g.childsCount-2]);this._correctLine(w[g.childsCount-2])}if(g.childsCount!=2){this._correctPlus(w[0])}if(this.tscheck){this._correctCheckStates(g)}if(this._onradh){if(this.xmlstate==1){var a=this.onXLE;this.onXLE=function(n){this._onradh(f);if(a){a(n)}}}else{this._onradh(f)}}}return l};dhtmlXTreeObject.prototype.enableContextMenu=function(a){if(a){this.cMenu=a}};dhtmlXTreeObject.prototype.setItemContextMenu=function(e,d){var a=e.toString().split(this.dlmtr);for(var c=0;c<a.length;c++){var b=this._globalIdStorageFind(a[c]);if(!b){continue}b.cMenu=d}};dhtmlXTreeObject.prototype.insertNewItem=function(d,h,k,c,g,f,e,b,a){var l=this._globalIdStorageFind(d);if(!l){return(-1)}var j=this._attachChildNode(l,h,k,c,g,f,e,b,a);if(!this._idpull[this.rootId].XMLload){this._idpull[this.rootId].XMLload=1}if((!this.XMLloadingWarning)&&(this.childCalc)){this._fixChildCountLabel(l)}return j};dhtmlXTreeObject.prototype.insertNewChild=function(d,h,j,c,g,f,e,b,a){return this.insertNewItem(d,h,j,c,g,f,e,b,a)};dhtmlXTreeObject.prototype._parseXMLTree=function(a,c){var b=new xmlPointer(dhx4.ajax.xmltop("tree",a));this._parse(b);this._p=b;if(c){c.call(this,a)}};dhtmlXTreeObject.prototype._parseItem=function(f,k,e,h){var b;if(this._srnd&&(!this._idpull[b=f.get("id")]||!this._idpull[b].span)){this._addItemSRND(k.id,b,f);return}var g=f.get_all();if((typeof(this.waitUpdateXML)=="object")&&(!this.waitUpdateXML[g.id])){this._parse(f,g.id,1);return}if((g.text===null)||(typeof(g.text)=="undefined")){g.text=f.sub("itemtext");if(g.text){g.text=g.text.content()}}var m=[];if(g.select){m.push("SELECT")}if(g.top){m.push("TOP")}if(g.call){this.nodeAskingCall=g.id}if(g.checked==-1){m.push("HCHECKED")}else{if(g.checked){m.push("CHECKED")}}if(g.open){m.push("OPEN")}if(this.waitUpdateXML){if(this._globalIdStorageFind(g.id)){var j=this.updateItem(g.id,g.text,g.im0,g.im1,g.im2,g.checked,g.child)}else{if(this.npl==0){m.push("TOP")}else{e=k.childNodes[this.npl]}var j=this._attachChildNode(k,g.id,g.text,0,g.im0,g.im1,g.im2,m.join(","),g.child,0,e);g.id=j.id;e=null}}else{var j=this._attachChildNode(k,g.id,g.text,0,g.im0,g.im1,g.im2,m.join(","),g.child,(h||0),e)}if(g.tooltip){j.span.parentNode.parentNode.title=g.tooltip}if(g.style){if(j.span.style.cssText){j.span.style.cssText+=(";"+g.style)}else{j.span.setAttribute("style",j.span.getAttribute("style")+"; "+g.style)}}if(g.radio){j._r_logic=true}if(g.nocheckbox){var l=j.span.parentNode.previousSibling.previousSibling;l.style.display="none";j.nocheckbox=true}if(g.disabled){if(g.checked!=null){this._setCheck(j,g.checked)}this.disableCheckbox(j,1)}j._acc=g.child||0;if(this.parserExtension){this.parserExtension._parseExtension.call(this,f,g,(k?k.id:0))}this.setItemColor(j,g.aCol,g.sCol);if(g.locked=="1"){this.lockItem(j.id,true,true)}if((g.imwidth)||(g.imheight)){this.setIconSize(g.imwidth,g.imheight,j)}if((g.closeable=="0")||(g.closeable=="1")){this.setItemCloseable(j,g.closeable)}var d="";if(g.topoffset){this.setItemTopOffset(j,g.topoffset)}if((!this.slowParse)||(typeof(this.waitUpdateXML)=="object")){if(f.sub_exists("item")){d=this._parse(f,g.id,1)}}else{if((!j.childsCount)&&f.sub_exists("item")){j.unParsed=f.clone()}f.each("userdata",function(a){this.setUserData(g.id,a.get("name"),a.content())},this)}if(d!=""){this.nodeAskingCall=d}f.each("userdata",function(a){this.setUserData(f.get("id"),a.get("name"),a.content())},this)};dhtmlXTreeObject.prototype._parse=function(c,f,a,b){if(this._srnd&&!this.parentObject.offsetHeight){var o=this;return window.setTimeout(function(){o._parse(c,f,a,b)},100)}if(!c.exists()){return}this.skipLock=true;if(!f){f=c.get("id");if(this._dynDeleteBranches[f]){this.deleteChildItems(f);this._dynDeleteBranches[f]--;if(!this._dynDeleteBranches[f]){delete this._dynDeleteBranches[f]}}var l=c.get("dhx_security");if(l){dhtmlx.security_key=l}if(c.get("radio")){this.htmlNode._r_logic=true}this.parsingOn=f;this.parsedArray=new Array();this.setCheckList="";this.nodeAskingCall=""}var m=this._globalIdStorageFind(f);if(!m){return dhx4.callEvent("onDataStructureError",["XML refers to not existing parent"])}this.parsCount=this.parsCount?(this.parsCount+1):1;this.XMLloadingWarning=1;if((m.childsCount)&&(!b)&&(!this._edsbps)&&(!m._has_top)){var g=0}else{var g=0}this.npl=0;c.each("item",function(p,n){m.XMLload=1;this._parseItem(p,m,0,g);if((this._edsbps)&&(this.npl==this._edsbpsC)){this._distributedStart(c,n+1,f,a,m.childsCount);return -1}this.npl++},this,b);if(!a){c.each("userdata",function(n){this.setUserData(c.get("id"),n.get("name"),n.content())},this);m.XMLload=1;if(this.waitUpdateXML){this.waitUpdateXML=false;for(var e=m.childsCount-1;e>=0;e--){if(m.childNodes[e]._dmark){this.deleteItem(m.childNodes[e].id)}}}var j=this._globalIdStorageFind(this.parsingOn);for(var e=0;e<this.parsedArray.length;e++){m.htmlNode.childNodes[0].appendChild(this.parsedArray[e])}this.parsedArray=[];this.lastLoadedXMLId=f;this.XMLloadingWarning=0;var k=this.setCheckList.split(this.dlmtr);for(var d=0;d<k.length;d++){if(k[d]){this.setCheck(k[d],1)}}if((this.XMLsource)&&(this.tscheck)&&(this.smcheck)&&(m.id!=this.rootId)){if(m.checkstate===0){this._setSubChecked(0,m)}else{if(m.checkstate===1){this._setSubChecked(1,m)}}}this._redrawFrom(this,null,b);if(c.get("order")&&c.get("order")!="none"){this._reorderBranch(m,c.get("order"),true)}if(this.nodeAskingCall!=""){this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()])}if(this._branchUpdate){this._branchUpdateNext(c)}}if(this.parsCount==1){this.parsingOn=null;if(this._srnd&&m.id!=this.rootId){this.prepareSR(m.id);if(this.XMLsource){this.openItem(m.id)}}c.through("item","open",null,function(n){this.openItem(n.get("id"))},this);if((!this._edsbps)||(!this._edsbpsA.length)){var h=this;window.setTimeout(function(){h.callEvent("onXLE",[h,f])},1);this.xmlstate=0}this.skipLock=false}this.parsCount--;var h=this;if(this._edsbps){window.setTimeout(function(){h._distributedStep(f)},this._edsbpsD)}if(!a&&this.onXLE){this.onXLE(this,f)}return this.nodeAskingCall};dhtmlXTreeObject.prototype._branchUpdateNext=function(a){a.each("item",function(d){var b=d.get("id");if(this._idpull[b]&&(!this._idpull[b].XMLload)){return}this._branchUpdate++;this.smartRefreshItem(d.get("id"),d)},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(b,c){if((b.nodeType==1)&&(b.tagName=="userdata")){var a=b.getAttribute("name");if((a)&&(b.childNodes[0])){this.setUserData(c,a,b.childNodes[0].data)}}};dhtmlXTreeObject.prototype._redrawFrom=function(h,b,g,c){if(!b){var e=h._globalIdStorageFind(h.lastLoadedXMLId);h.lastLoadedXMLId=-1;if(!e){return 0}}else{e=b}var f=0;for(var d=(g?g-1:0);d<e.childsCount;d++){if((!this._branchUpdate)||(this._getOpenState(e)==1)){if((!b)||(c==1)){e.childNodes[d].htmlNode.parentNode.parentNode.style.display=""}}if(e.childNodes[d].openMe==1){this._openItem(e.childNodes[d]);e.childNodes[d].openMe=0}h._redrawFrom(h,e.childNodes[d]);if(this.childCalc!=null){if((e.childNodes[d].unParsed)||((!e.childNodes[d].XMLload)&&(this.XMLsource))){if(e.childNodes[d]._acc){e.childNodes[d].span.innerHTML=e.childNodes[d].label+this.htmlcA+e.childNodes[d]._acc+this.htmlcB}else{e.childNodes[d].span.innerHTML=e.childNodes[d].label}}if((e.childNodes[d].childNodes.length)&&(this.childCalc)){if(this.childCalc==1){e.childNodes[d].span.innerHTML=e.childNodes[d].label+this.htmlcA+e.childNodes[d].childsCount+this.htmlcB}if(this.childCalc==2){var a=e.childNodes[d].childsCount-(e.childNodes[d].pureChilds||0);if(a){e.childNodes[d].span.innerHTML=e.childNodes[d].label+this.htmlcA+a+this.htmlcB}if(e.pureChilds){e.pureChilds++}else{e.pureChilds=1}}if(this.childCalc==3){e.childNodes[d].span.innerHTML=e.childNodes[d].label+this.htmlcA+e.childNodes[d]._acc+this.htmlcB}if(this.childCalc==4){var a=e.childNodes[d]._acc;if(a){e.childNodes[d].span.innerHTML=e.childNodes[d].label+this.htmlcA+a+this.htmlcB}}}else{if(this.childCalc==4){f++}}f+=e.childNodes[d]._acc;if(this.childCalc==3){f++}}}if((!e.unParsed)&&((e.XMLload)||(!this.XMLsource))){e._acc=f}h._correctLine(e);h._correctPlus(e);if((this.childCalc)&&(!b)){h._fixChildCountLabel(e)}};dhtmlXTreeObject.prototype._createSelf=function(){var a=document.createElement("div");a.className="containerTableStyle";a.style.width=this.width;a.style.height=this.height;this.parentObject.appendChild(a);return a};dhtmlXTreeObject.prototype._xcloseAll=function(b){if(b.unParsed){return}if(this.rootId!=b.id){if(!b.htmlNode){return}var d=b.htmlNode.childNodes[0].childNodes;var a=d.length;for(var c=1;c<a;c++){d[c].style.display="none"}this._correctPlus(b)}for(var c=0;c<b.childsCount;c++){if(b.childNodes[c].childsCount){this._xcloseAll(b.childNodes[c])}}};dhtmlXTreeObject.prototype._xopenAll=function(a){this._HideShow(a,2);for(var b=0;b<a.childsCount;b++){this._xopenAll(a.childNodes[b])}};dhtmlXTreeObject.prototype._correctPlus=function(b){if(!b.htmlNode){return}var c=b.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild;var e=b.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0];var a=this.lineArray;if((this.XMLsource)&&(!b.XMLload)){var a=this.plusArray;this._setSrc(e,this.iconURL+b.images[2]);if(this._txtimg){return(c.innerHTML="[+]")}}else{if((b.childsCount)||(b.unParsed)){if((b.htmlNode.childNodes[0].childNodes[1])&&(b.htmlNode.childNodes[0].childNodes[1].style.display!="none")){if(!b.wsign){var a=this.minusArray}this._setSrc(e,this.iconURL+b.images[1]);if(this._txtimg){return(c.innerHTML="[-]")}}else{if(!b.wsign){var a=this.plusArray}this._setSrc(e,this.iconURL+b.images[2]);if(this._txtimg){return(c.innerHTML="[+]")}}}else{this._setSrc(e,this.iconURL+b.images[0])}}var d=2;if(!b.treeNod.treeLinesOn){this._setSrc(c,this.imPath+a[3])}else{if(b.parentObject){d=this._getCountStatus(b.id,b.parentObject)}this._setSrc(c,this.imPath+a[d])}};dhtmlXTreeObject.prototype._correctLine=function(b){if(!b.htmlNode){return}var a=b.parentObject;if(a){if((this._getLineStatus(b.id,a)==0)||(!this.treeLinesOn)){for(var c=1;c<=b.childsCount;c++){if(!b.htmlNode.childNodes[0].childNodes[c]){break}b.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage="";b.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat=""}}else{for(var c=1;c<=b.childsCount;c++){if(!b.htmlNode.childNodes[0].childNodes[c]){break}b.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")";b.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat="repeat-y"}}}};dhtmlXTreeObject.prototype._getCountStatus=function(b,a){if(a.childsCount<=1){if(a.id==this.rootId){return 4}else{return 0}}if(a.childNodes[0].id==b){if(a.id==this.rootId){return 2}else{return 1}}if(a.childNodes[a.childsCount-1].id==b){return 0}return 1};dhtmlXTreeObject.prototype._getLineStatus=function(b,a){if(a.childNodes[a.childsCount-1].id==b){return 0}return 1};dhtmlXTreeObject.prototype._HideShow=function(b,e){if((this.XMLsource)&&(!b.XMLload)){if(e==1){return}b.XMLload=1;this._loadDynXML(b.id);return}if(b.unParsed){this.reParse(b)}var d=b.htmlNode.childNodes[0].childNodes;var a=d.length;if(a>1){if(((d[1].style.display!="none")||(e==1))&&(e!=2)){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";nodestyle="none"}else{nodestyle=""}for(var c=1;c<a;c++){d[c].style.display=nodestyle}}this._correctPlus(b)};dhtmlXTreeObject.prototype._getOpenState=function(a){if(!a.htmlNode){return 0}var b=a.htmlNode.childNodes[0].childNodes;if(b.length<=1){return 0}if(b[1].style.display!="none"){return 1}else{return -1}};dhtmlXTreeObject.prototype.onRowClick2=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onDblClick",[this.parentObject.id,a])){return false}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){a._HideShow(this.parentObject)}else{a._HideShow(this.parentObject,2)}if(a.checkEvent("onOpenEnd")){if(!a.xmlstate){a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)])}else{a._oie_onXLE.push(a.onXLE);a.onXLE=a._epnFHe}}return false};dhtmlXTreeObject.prototype.onRowClick=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onOpenStart",[this.parentObject.id,a._getOpenState(this.parentObject)])){return 0}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){a._HideShow(this.parentObject)}else{a._HideShow(this.parentObject,2)}if(a.checkEvent("onOpenEnd")){if(!a.xmlstate){a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)])}else{a._oie_onXLE.push(a.onXLE);a.onXLE=a._epnFHe}}};dhtmlXTreeObject.prototype._epnFHe=function(b,c,a){if(c!=this.rootId){this.callEvent("onOpenEnd",[c,b.getOpenState(c)])}b.onXLE=b._oie_onXLE.pop();if(!a&&!b._oie_onXLE.length){if(b.onXLE){b.onXLE(b,c)}}};dhtmlXTreeObject.prototype.onRowClickDown=function(b){b=b||window.event;var a=this.parentObject.treeNod;a._selectItem(this.parentObject,b)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){var b=new Array();for(var a=0;a<this._selected.length;a++){b[a]=this._selected[a].id}return(b.join(this.dlmtr))};dhtmlXTreeObject.prototype._selectItem=function(h,j){if(this.checkEvent("onSelect")){this._onSSCFold=this.getSelectedItemId()}if((!this._amsel)||(!j)||((!j.ctrlKey)&&(!j.metaKey)&&(!j.shiftKey))){this._unselectItems()}if((h.i_sel)&&(this._amsel)&&(j)&&(j.ctrlKey||j.metaKey)){this._unselectItem(h)}else{if((!h.i_sel)&&((!this._amselS)||(this._selected.length==0)||(this._selected[0].parentObject==h.parentObject))){if((this._amsel)&&(j)&&(j.shiftKey)&&(this._selected.length!=0)&&(this._selected[this._selected.length-1].parentObject==h.parentObject)){var f=this._getIndex(this._selected[this._selected.length-1]);var d=this._getIndex(h);if(d<f){var l=f;f=d;d=l}for(var g=f;g<=d;g++){if(!h.parentObject.childNodes[g].i_sel){this._markItem(h.parentObject.childNodes[g])}}}else{this._markItem(h)}}}if(this.checkEvent("onSelect")){var k=this.getSelectedItemId();if(k!=this._onSSCFold){this.callEvent("onSelect",[k])}}};dhtmlXTreeObject.prototype._markItem=function(a){if(a.scolor){a.span.style.color=a.scolor}a.span.className="selectedTreeRow";a.i_sel=true;this._selected[this._selected.length]=a};dhtmlXTreeObject.prototype.getIndexById=function(b){var a=this._globalIdStorageFind(b);if(!a){return null}return this._getIndex(a)};dhtmlXTreeObject.prototype._getIndex=function(a){var c=a.parentObject;for(var b=0;b<c.childsCount;b++){if(c.childNodes[b]==a){return b}}};dhtmlXTreeObject.prototype._unselectItem=function(b){if((b)&&(b.i_sel)){b.span.className="standartTreeRow";if(b.acolor){b.span.style.color=b.acolor}b.i_sel=false;for(var a=0;a<this._selected.length;a++){if(!this._selected[a].i_sel){this._selected.splice(a,1);break}}}};dhtmlXTreeObject.prototype._unselectItems=function(){for(var a=0;a<this._selected.length;a++){var b=this._selected[a];b.span.className="standartTreeRow";if(b.acolor){b.span.style.color=b.acolor}b.i_sel=false}this._selected=new Array()};dhtmlXTreeObject.prototype.onRowSelect=function(d,c,g){d=d||window.event;var b=this.parentObject;if(c){b=c.parentObject}var a=b.treeNod;var f=a.getSelectedItemId();if((!d)||(!d.skipUnSel)){a._selectItem(b,d)}if(!g){if(b.actionHandler){b.actionHandler(b.id,f)}else{a.callEvent("onClick",[b.id,f])}}};dhtmlXTreeObject.prototype._correctCheckStates=function(e){if(!this.tscheck){return}if(!e){return}if(e.id==this.rootId){return}var c=e.childNodes;var b=0;var a=0;if(e.childsCount==0){return}for(var d=0;d<e.childsCount;d++){if(c[d].dscheck){continue}if(c[d].checkstate==0){b=1}else{if(c[d].checkstate==1){a=1}else{b=1;a=1;break}}}if((b)&&(a)){this._setCheck(e,"unsure")}else{if(b){this._setCheck(e,false)}else{this._setCheck(e,true)}}this._correctCheckStates(e.parentObject)};dhtmlXTreeObject.prototype.onCheckBoxClick=function(a){if(!this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){return}if(this.parentObject.dscheck){return true}if(this.treeNod.tscheck){if(this.parentObject.checkstate==1){this.treeNod._setSubChecked(false,this.parentObject)}else{this.treeNod._setSubChecked(true,this.parentObject)}}else{if(this.parentObject.checkstate==1){this.treeNod._setCheck(this.parentObject,false)}else{this.treeNod._setCheck(this.parentObject,true)}}this.treeNod._correctCheckStates(this.parentObject.parentObject);return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])};dhtmlXTreeObject.prototype._createItem=function(m,l,h){var n=document.createElement("table");n.cellSpacing=0;n.cellPadding=0;n.border=0;if(this.hfMode){n.style.tableLayout="fixed"}n.style.margin=0;n.style.padding=0;var g=document.createElement("tbody");var k=document.createElement("tr");var d=document.createElement("td");d.className="standartTreeImage";if(this._txtimg){var e=document.createElement("div");d.appendChild(e);e.className="dhx_tree_textSign"}else{var e=this._getImg(l.id);e.border="0";if(e.tagName=="IMG"){e.align="absmiddle"}d.appendChild(e);e.style.padding=0;e.style.margin=0;e.style.width=this.def_line_img_x}var c=document.createElement("td");var j=this._getImg(this.cBROf?this.rootId:l.id);j.checked=0;this._setSrc(j,this.imPath+this.checkArray[0]);j.style.width="18px";j.style.height="18px";if(!m){c.style.display="none"}c.appendChild(j);if((!this.cBROf)&&(j.tagName=="IMG")){j.align="absmiddle"}j.onclick=this.onCheckBoxClick;j.treeNod=this;j.parentObject=l;if(!window._KHTMLrv){c.width="20px"}else{c.width="16px"}var b=document.createElement("td");b.className="standartTreeImage";var f=this._getImg(this.timgen?l.id:this.rootId);f.onmousedown=this._preventNsDrag;f.ondragstart=this._preventNsDrag;f.border="0";if(this._aimgs){f.parentObject=l;if(f.tagName=="IMG"){f.align="absmiddle"}f.onclick=this.onRowSelect}if(!h){this._setSrc(f,this.iconURL+this.imageArray[0])}b.appendChild(f);f.style.padding=0;f.style.margin=0;if(this.timgen){b.style.width=f.style.width=this.def_img_x;f.style.height=this.def_img_y}else{f.style.width="0px";f.style.height="0px";if(_isOpera||window._KHTMLrv){b.style.display="none"}}var a=document.createElement("td");a.className="standartTreeRow";l.span=document.createElement("span");l.span.className="standartTreeRow";if(this.mlitems){l.span.style.width=this.mlitems;l.span.style.display="block"}else{a.noWrap=true}if(dhx4.isIE8){a.style.width="99999px"}else{if(!window._KHTMLrv){a.style.width="100%"}}l.span.innerHTML=l.label;a.appendChild(l.span);a.parentObject=l;d.parentObject=l;a.onclick=this.onRowSelect;d.onclick=this.onRowClick;a.ondblclick=this.onRowClick2;if(this.ettip){k.title=l.label}if(this.dragAndDropOff){if(this._aimgs){this.dragger.addDraggableItem(b,this);b.parentObject=l}this.dragger.addDraggableItem(a,this)}l.span.style.paddingLeft="5px";l.span.style.paddingRight="5px";a.style.verticalAlign="";a.style.fontSize="10pt";a.style.cursor=this.style_pointer;k.appendChild(d);k.appendChild(c);k.appendChild(b);k.appendChild(a);g.appendChild(k);n.appendChild(g);if(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut")){k.onmousemove=this._itemMouseIn;k[(_isIE)?"onmouseleave":"onmouseout"]=this._itemMouseOut}return n};dhtmlXTreeObject.prototype.setImagePath=function(a){this.imPath=a;this.iconURL=a};dhtmlXTreeObject.prototype.setIconPath=function(a){this.iconURL=a};dhtmlXTreeObject.prototype._getLeafCount=function(e){var d=0;for(var c=0;c<e.childsCount;c++){if(e.childNodes[c].childsCount==0){d++}}return d};dhtmlXTreeObject.prototype._getChildCounterValue=function(b){var a=this._globalIdStorageFind(b);if(!a){return 0}if((a.unParsed)||((!a.XMLload)&&(this.XMLsource))){return a._acc}switch(this.childCalc){case 1:return a.childsCount;break;case 2:return this._getLeafCount(a);break;case 3:return a._acc;break;case 4:return a._acc;break}};dhtmlXTreeObject.prototype._fixChildCountLabel=function(f,d){if(this.childCalc==null){return}if((f.unParsed)||((!f.XMLload)&&(this.XMLsource))){if(f._acc){f.span.innerHTML=f.label+this.htmlcA+f._acc+this.htmlcB}else{f.span.innerHTML=f.label}return}switch(this.childCalc){case 1:if(f.childsCount!=0){f.span.innerHTML=f.label+this.htmlcA+f.childsCount+this.htmlcB}else{f.span.innerHTML=f.label}break;case 2:var e=this._getLeafCount(f);if(e!=0){f.span.innerHTML=f.label+this.htmlcA+e+this.htmlcB}else{f.span.innerHTML=f.label}break;case 3:if(f.childsCount!=0){var c=0;for(var b=0;b<f.childsCount;b++){if(!f.childNodes[b]._acc){f.childNodes[b]._acc=0}c+=f.childNodes[b]._acc*1}c+=f.childsCount*1;f.span.innerHTML=f.label+this.htmlcA+c+this.htmlcB;f._acc=c}else{f.span.innerHTML=f.label;f._acc=0}if((f.parentObject)&&(f.parentObject!=this.htmlNode)){this._fixChildCountLabel(f.parentObject)}break;case 4:if(f.childsCount!=0){var c=0;for(var b=0;b<f.childsCount;b++){if(!f.childNodes[b]._acc){f.childNodes[b]._acc=1}c+=f.childNodes[b]._acc*1}f.span.innerHTML=f.label+this.htmlcA+c+this.htmlcB;f._acc=c}else{f.span.innerHTML=f.label;f._acc=1}if((f.parentObject)&&(f.parentObject!=this.htmlNode)){this._fixChildCountLabel(f.parentObject)}break}};dhtmlXTreeObject.prototype.setChildCalcMode=function(a){switch(a){case"child":this.childCalc=1;break;case"leafs":this.childCalc=2;break;case"childrec":this.childCalc=3;break;case"leafsrec":this.childCalc=4;break;case"disabled":this.childCalc=null;break;default:this.childCalc=4}};dhtmlXTreeObject.prototype.setChildCalcHTML=function(b,a){this.htmlcA=b;this.htmlcB=a};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(a){this.attachEvent("onRightClick",a)};dhtmlXTreeObject.prototype.setOnClickHandler=function(a){this.attachEvent("onClick",a)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(a){this.attachEvent("onSelect",a)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(a){this.XMLsource=a};dhtmlXTreeObject.prototype.setOnCheckHandler=function(a){this.attachEvent("onCheck",a)};dhtmlXTreeObject.prototype.setOnOpenHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(a){this.attachEvent("onDblClick",a)};dhtmlXTreeObject.prototype.openAllItems=function(b){var a=this._globalIdStorageFind(b);if(!a){return 0}this._xopenAll(a)};dhtmlXTreeObject.prototype.getOpenState=function(b){var a=this._globalIdStorageFind(b);if(!a){return""}return this._getOpenState(a)};dhtmlXTreeObject.prototype.closeAllItems=function(b){if(b===window.undefined){b=this.rootId}var a=this._globalIdStorageFind(b);if(!a){return 0}this._xcloseAll(a);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype.setUserData=function(d,b,c){var a=this._globalIdStorageFind(d,0,true);if(!a){return}if(b=="hint"){a.htmlNode.childNodes[0].childNodes[0].title=c}if(typeof(a.userData["t_"+b])=="undefined"){if(!a._userdatalist){a._userdatalist=b}else{a._userdatalist+=","+b}}a.userData["t_"+b]=c};dhtmlXTreeObject.prototype.getUserData=function(c,b){var a=this._globalIdStorageFind(c,0,true);if(!a){return}return a.userData["t_"+b]};dhtmlXTreeObject.prototype.getItemColor=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}var b=new Object();if(a.acolor){b.acolor=a.acolor}if(a.scolor){b.scolor=a.scolor}return b};dhtmlXTreeObject.prototype.setItemColor=function(c,b,d){if((c)&&(c.span)){var a=c}else{var a=this._globalIdStorageFind(c)}if(!a){return 0}else{if(a.i_sel){if(d){a.span.style.color=d}}else{if(b){a.span.style.color=b}}if(d){a.scolor=d}if(b){a.acolor=b}}};dhtmlXTreeObject.prototype.getItemText=function(b){var a=this._globalIdStorageFind(b);if(!a){return 0}return(a.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML)};dhtmlXTreeObject.prototype.getParentId=function(b){var a=this._globalIdStorageFind(b);if((!a)||(!a.parentObject)){return""}return a.parentObject.id};dhtmlXTreeObject.prototype.changeItemId=function(b,c){if(b==c){return}var a=this._globalIdStorageFind(b);if(!a){return 0}a.id=c;a.span.contextMenuId=c;this._idpull[c]=this._idpull[b];delete this._idpull[b]};dhtmlXTreeObject.prototype.doCut=function(){if(this.nodeCut){this.clearCut()}this.nodeCut=(new Array()).concat(this._selected);for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b._cimgs=new Array();b._cimgs[0]=b.images[0];b._cimgs[1]=b.images[1];b._cimgs[2]=b.images[2];b.images[0]=b.images[1]=b.images[2]=this.cutImage;this._correctPlus(b)}};dhtmlXTreeObject.prototype.doPaste=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}for(var b=0;b<this.nodeCut.length;b++){if(this._checkPNodes(a,this.nodeCut[b])){continue}this._moveNode(this.nodeCut[b],a)}this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b.images[0]=b._cimgs[0];b.images[1]=b._cimgs[1];b.images[2]=b._cimgs[2];this._correctPlus(b)}this.nodeCut=new Array()};dhtmlXTreeObject.prototype._moveNode=function(a,b){var f=this.dadmodec;if(f==1){var e=b;if(this.dadmodefix<0){while(true){e=this._getPrevNode(e);if((e==-1)){e=this.htmlNode;break}if((e.tr==0)||(e.tr.style.display=="")||(!e.parentObject)){break}}var d=e;var c=b}else{if((e.tr)&&(e.tr.nextSibling)&&(e.tr.nextSibling.nodem)&&(this._getOpenState(e)<1)){e=e.tr.nextSibling.nodem}else{e=this._getNextNode(e);if((e==-1)){e=this.htmlNode}}var c=e;var d=b}if(this._getNodeLevel(d,0)>this._getNodeLevel(c,0)){if(!this.dropLower){return this._moveNodeTo(a,d.parentObject)}else{if(c.id!=this.rootId){return this._moveNodeTo(a,c.parentObject,c)}else{return this._moveNodeTo(a,this.htmlNode,null)}}}else{return this._moveNodeTo(a,c.parentObject,c)}}else{return this._moveNodeTo(a,b)}};dhtmlXTreeObject.prototype._fixNodesCollection=function(h,f){var b=0;var d=0;var g=h.childNodes;var a=h.childsCount-1;if(f==g[a]){return}for(var e=0;e<a;e++){if(g[e]==g[a]){g[e]=g[e+1];g[e+1]=g[a]}}for(var e=0;e<a+1;e++){if(b){var c=g[e];g[e]=b;b=c}else{if(g[e]==f){b=g[e];g[e]=g[a]}}}};dhtmlXTreeObject.prototype._recreateBranch=function(f,h,e,a){var b;var j="";if(e){for(b=0;b<h.childsCount;b++){if(h.childNodes[b]==e){break}}if(b!=0){e=h.childNodes[b-1]}else{j="TOP";e=""}}var c=this._onradh;this._onradh=null;var g=this._attachChildNode(h,f.id,f.label,0,f.images[0],f.images[1],f.images[2],j,0,e);g._userdatalist=f._userdatalist;g.userData=f.userData.clone();if(f._attrs){g._attrs={};for(var d in f._attrs){g._attrs[d]=f._attrs[d]}}g.XMLload=f.XMLload;if(c){this._onradh=c;this._onradh(g.id)}if(f.treeNod.dpcpy){f.treeNod._globalIdStorageFind(f.id)}else{g.unParsed=f.unParsed}this._correctPlus(g);for(var b=0;b<f.childsCount;b++){this._recreateBranch(f.childNodes[b],g,0,1)}if((!a)&&(this.childCalc)){this._redrawFrom(this,h)}return g};dhtmlXTreeObject.prototype._moveNodeTo=function(m,o,l){if(m.treeNod._nonTrivialNode){return m.treeNod._nonTrivialNode(this,o,l,m)}if(this._checkPNodes(o,m)){return false}if(o.mytype){var g=(m.treeNod.lWin!=o.lWin)}else{var g=(m.treeNod.lWin!=o.treeNod.lWin)}if(!this.callEvent("onDrag",[m.id,o.id,(l?l.id:null),m.treeNod,o.treeNod])){return false}if((o.XMLload==0)&&(this.XMLsource)){o.XMLload=1;this._loadDynXML(o.id)}this.openItem(o.id);var b=m.treeNod;var j=m.parentObject.childsCount;var k=m.parentObject;if((g)||(b.dpcpy)){var d=m.id;m=this._recreateBranch(m,o,l);if(!b.dpcpy){b.deleteItem(d)}}else{var e=o.childsCount;var n=o.childNodes;if(e==0){o._open=true}b._unselectItem(m);n[e]=m;m.treeNod=o.treeNod;o.childsCount++;var h=this._drawNewTr(n[e].htmlNode);if(!l){o.htmlNode.childNodes[0].appendChild(h);if(this.dadmode==1){this._fixNodesCollection(o,l)}}else{o.htmlNode.childNodes[0].insertBefore(h,l.tr);this._fixNodesCollection(o,l);n=o.childNodes}}if((!b.dpcpy)&&(!g)){var a=m.tr;if((document.all)&&(navigator.appVersion.search(/MSIE\ 5\.0/gi)!=-1)){window.setTimeout(function(){a.parentNode.removeChild(a)},250)}else{m.parentObject.htmlNode.childNodes[0].removeChild(m.tr)}if((!l)||(o!=m.parentObject)){for(var f=0;f<k.childsCount;f++){if(k.childNodes[f].id==m.id){k.childNodes[f]=0;break}}}else{k.childNodes[k.childsCount-1]=0}b._compressChildList(k.childsCount,k.childNodes);k.childsCount--}if((!g)&&(!b.dpcpy)){m.tr=h;h.nodem=m;m.parentObject=o;if(b!=o.treeNod){if(m.treeNod._registerBranch(m,b)){return}this._clearStyles(m);this._redrawFrom(this,m.parentObject);if(this._onradh){this._onradh(m.id)}}this._correctPlus(o);this._correctLine(o);this._correctLine(m);this._correctPlus(m);if(l){this._correctPlus(l)}else{if(o.childsCount>=2){this._correctPlus(n[o.childsCount-2]);this._correctLine(n[o.childsCount-2])}}this._correctPlus(n[o.childsCount-1]);if(this.tscheck){this._correctCheckStates(o)}if(b.tscheck){b._correctCheckStates(k)}}if(j>1){b._correctPlus(k.childNodes[j-2]);b._correctLine(k.childNodes[j-2])}b._correctPlus(k);b._correctLine(k);this._fixChildCountLabel(o);b._fixChildCountLabel(k);this.callEvent("onDrop",[m.id,o.id,(l?l.id:null),b,o.treeNod]);return m.id};dhtmlXTreeObject.prototype._clearStyles=function(a){if(!a.htmlNode){return}var d=a.htmlNode.childNodes[0].childNodes[0].childNodes[1];var b=d.nextSibling.nextSibling;a.span.innerHTML=a.label;a.i_sel=false;if(a._aimgs){this.dragger.removeDraggableItem(d.nextSibling)}if(this.checkBoxOff){d.childNodes[0].style.display="";d.childNodes[0].onclick=this.onCheckBoxClick;this._setSrc(d.childNodes[0],this.imPath+this.checkArray[a.checkstate])}else{d.style.display="none"}d.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(b);if(this.dragAndDropOff){this.dragger.addDraggableItem(b,this)}if(this._aimgs){this.dragger.addDraggableItem(d.nextSibling,this)}b.childNodes[0].className="standartTreeRow";b.onclick=this.onRowSelect;b.ondblclick=this.onRowClick2;d.previousSibling.onclick=this.onRowClick;this._correctLine(a);this._correctPlus(a);for(var c=0;c<a.childsCount;c++){this._clearStyles(a.childNodes[c])}};dhtmlXTreeObject.prototype._registerBranch=function(b,a){if(a){a._globalIdStorageSub(b.id)}b.id=this._globalIdStorageAdd(b.id,b);b.treeNod=this;for(var c=0;c<b.childsCount;c++){this._registerBranch(b.childNodes[c],a)}return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(a){this.tscheck=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(a){this.ehlt=true;this.attachEvent("onMouseIn",a)};dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(a){this.ehlt=true;this.attachEvent("onMouseOut",a)};dhtmlXTreeObject.prototype.enableMercyDrag=function(a){this.dpcpy=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableTreeImages=function(a){this.timgen=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableFixedMode=function(a){this.hfMode=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(b,a){this.checkBoxOff=dhx4.s2b(b);this.cBROf=(!(this.checkBoxOff||dhx4.s2b(a)))};dhtmlXTreeObject.prototype.setStdImages=function(a,c,b){this.imageArray[0]=a;this.imageArray[1]=c;this.imageArray[2]=b};dhtmlXTreeObject.prototype.enableTreeLines=function(a){this.treeLinesOn=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setImageArrays=function(d,a,f,e,c,b){switch(d){case"plus":this.plusArray[0]=a;this.plusArray[1]=f;this.plusArray[2]=e;this.plusArray[3]=c;this.plusArray[4]=b;break;case"minus":this.minusArray[0]=a;this.minusArray[1]=f;this.minusArray[2]=e;this.minusArray[3]=c;this.minusArray[4]=b;break}};dhtmlXTreeObject.prototype.openItem=function(b){this.skipLock=true;var a=this._globalIdStorageFind(b);if(!a){return 0}else{return this._openItem(a)}this.skipLock=false};dhtmlXTreeObject.prototype._openItem=function(a){var b=this._getOpenState(a);if((b<0)||(((this.XMLsource)&&(!a.XMLload)))){if(!this.callEvent("onOpenStart",[a.id,b])){return 0}this._HideShow(a,2);if(this.checkEvent("onOpenEnd")){if(this.onXLE==this._epnFHe){this._epnFHe(this,a.id,true)}if(!this.xmlstate||!this.XMLsource){this.callEvent("onOpenEnd",[a.id,this._getOpenState(a)])}else{this._oie_onXLE.push(this.onXLE);this.onXLE=this._epnFHe}}}else{if(this._srnd){this._HideShow(a,2)}}if(a.parentObject&&!this._skip_open_parent){this._openItem(a.parentObject)}};dhtmlXTreeObject.prototype.closeItem=function(b){if(this.rootId==b){return 0}this.skipLock=true;var a=this._globalIdStorageFind(b);if(!a){return 0}if(a.closeble){this._HideShow(a,1)}this.skipLock=false};dhtmlXTreeObject.prototype.getLevel=function(b){var a=this._globalIdStorageFind(b);if(!a){return 0}return this._getNodeLevel(a,0)};dhtmlXTreeObject.prototype.setItemCloseable=function(c,a){a=dhx4.s2b(a);if((c)&&(c.span)){var b=c}else{var b=this._globalIdStorageFind(c)}if(!b){return 0}b.closeble=a};dhtmlXTreeObject.prototype._getNodeLevel=function(a,b){if(a.parentObject){return this._getNodeLevel(a.parentObject,b+1)}return(b)};dhtmlXTreeObject.prototype.hasChildren=function(b){var a=this._globalIdStorageFind(b);if(!a){return 0}else{if((this.XMLsource)&&(!a.XMLload)){return true}else{return a.childsCount}}};dhtmlXTreeObject.prototype._getLeafCount=function(e){var d=0;for(var c=0;c<e.childsCount;c++){if(e.childNodes[c].childsCount==0){d++}}return d};dhtmlXTreeObject.prototype.setItemText=function(d,c,b){var a=this._globalIdStorageFind(d);if(!a){return 0}a.label=c;a.span.innerHTML=c;if(this.childCalc){this._fixChildCountLabel(a)}a.span.parentNode.parentNode.title=b||""};dhtmlXTreeObject.prototype.getItemTooltip=function(b){var a=this._globalIdStorageFind(b);if(!a){return""}return(a.span.parentNode.parentNode._dhx_title||a.span.parentNode.parentNode.title||"")};dhtmlXTreeObject.prototype.refreshItem=function(b){if(!b){b=this.rootId}var a=this._globalIdStorageFind(b);this._dynDeleteBranches[b]=(this._dynDeleteBranches[b]||0)+1;this._loadDynXML(b)};dhtmlXTreeObject.prototype.setItemImage2=function(d,a,e,c){var b=this._globalIdStorageFind(d);if(!b){return 0}b.images[1]=e;b.images[2]=c;b.images[0]=a;this._correctPlus(b)};dhtmlXTreeObject.prototype.setItemImage=function(c,a,d){var b=this._globalIdStorageFind(c);if(!b){return 0}if(d){b.images[1]=a;b.images[2]=d}else{b.images[0]=a}this._correctPlus(b)};dhtmlXTreeObject.prototype.getSubItems=function(c){var a=this._globalIdStorageFind(c,0,1);if(!a){return 0}if(a.unParsed){return(this._getSubItemsXML(a.unParsed))}var b="";for(i=0;i<a.childsCount;i++){if(!b){b=""+a.childNodes[i].id}else{b+=this.dlmtr+a.childNodes[i].id}}return b};dhtmlXTreeObject.prototype._getAllScraggyItems=function(c){var d="";for(var b=0;b<c.childsCount;b++){if((c.childNodes[b].unParsed)||(c.childNodes[b].childsCount>0)){if(c.childNodes[b].unParsed){var a=this._getAllScraggyItemsXML(c.childNodes[b].unParsed,1)}else{var a=this._getAllScraggyItems(c.childNodes[b])}if(a){if(d){d+=this.dlmtr+a}else{d=a}}}else{if(!d){d=""+c.childNodes[b].id}else{d+=this.dlmtr+c.childNodes[b].id}}}return d};dhtmlXTreeObject.prototype._getAllFatItems=function(c){var d="";for(var b=0;b<c.childsCount;b++){if((c.childNodes[b].unParsed)||(c.childNodes[b].childsCount>0)){if(!d){d=""+c.childNodes[b].id}else{d+=this.dlmtr+c.childNodes[b].id}if(c.childNodes[b].unParsed){var a=this._getAllFatItemsXML(c.childNodes[b].unParsed,1)}else{var a=this._getAllFatItems(c.childNodes[b])}if(a){d+=this.dlmtr+a}}}return d};dhtmlXTreeObject.prototype._getAllSubItems=function(f,e,d){if(d){b=d}else{var b=this._globalIdStorageFind(f)}if(!b){return 0}e="";for(var c=0;c<b.childsCount;c++){if(!e){e=""+b.childNodes[c].id}else{e+=this.dlmtr+b.childNodes[c].id}var a=this._getAllSubItems(0,e,b.childNodes[c]);if(a){e+=this.dlmtr+a}}if(b.unParsed){e=this._getAllSubItemsXML(f,e,b.unParsed)}return e};dhtmlXTreeObject.prototype.selectItem=function(d,c,b){c=dhx4.s2b(c);var a=this._globalIdStorageFind(d);if((!a)||(!a.parentObject)){return 0}if(this.XMLloadingWarning){a.parentObject.openMe=1}else{this._openItem(a.parentObject)}var e=null;if(b){e=new Object;e.ctrlKey=true;if(a.i_sel){e.skipUnSel=true}}if(c){this.onRowSelect(e,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],false)}else{this.onRowSelect(e,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],true)}};dhtmlXTreeObject.prototype.getSelectedItemText=function(){var b=new Array();for(var a=0;a<this._selected.length;a++){b[a]=this._selected[a].span.innerHTML}return(b.join(this.dlmtr))};dhtmlXTreeObject.prototype._compressChildList=function(a,c){a--;for(var b=0;b<a;b++){if(c[b]==0){c[b]=c[b+1];c[b+1]=0}}};dhtmlXTreeObject.prototype._deleteNode=function(g,e,j){if((!e)||(!e.parentObject)){return 0}var a=0;var b=0;if(e.tr.nextSibling){a=e.tr.nextSibling.nodem}if(e.tr.previousSibling){b=e.tr.previousSibling.nodem}var f=e.parentObject;var c=f.childsCount;var h=f.childNodes;for(var d=0;d<c;d++){if(h[d].id==g){if(!j){f.htmlNode.childNodes[0].removeChild(h[d].tr)}h[d]=0;break}}this._compressChildList(c,h);if(!j){f.childsCount--}if(a){this._correctPlus(a);this._correctLine(a)}if(b){this._correctPlus(b);this._correctLine(b)}if(this.tscheck){this._correctCheckStates(f)}if(!j){this._globalIdStorageRecSub(e)}};dhtmlXTreeObject.prototype.setCheck=function(c,b){var a=this._globalIdStorageFind(c,0,1);if(!a){return}if(b==="unsure"){this._setCheck(a,b)}else{b=dhx4.s2b(b);if((this.tscheck)&&(this.smcheck)){this._setSubChecked(b,a)}else{this._setCheck(a,b)}}if(this.smcheck){this._correctCheckStates(a.parentObject)}};dhtmlXTreeObject.prototype._setCheck=function(a,c){if(!a){return}if(((a.parentObject._r_logic)||(this._frbtr))&&(c)){if(this._frbtrs){if(this._frbtrL){this.setCheck(this._frbtrL.id,0)}this._frbtrL=a}else{for(var b=0;b<a.parentObject.childsCount;b++){this._setCheck(a.parentObject.childNodes[b],0)}}}var d=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(c=="unsure"){a.checkstate=2}else{if(c){a.checkstate=1}else{a.checkstate=0}}if(a.dscheck){a.checkstate=a.dscheck}this._setSrc(d,this.imPath+((a.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[a.checkstate])};dhtmlXTreeObject.prototype.setSubChecked=function(c,b){var a=this._globalIdStorageFind(c);this._setSubChecked(b,a);this._correctCheckStates(a.parentObject)};dhtmlXTreeObject.prototype._setSubChecked=function(c,a){c=dhx4.s2b(c);if(!a){return}if(((a.parentObject._r_logic)||(this._frbtr))&&(c)){for(var b=0;b<a.parentObject.childsCount;b++){this._setSubChecked(0,a.parentObject.childNodes[b])}}if(a.unParsed){this._setSubCheckedXML(c,a.unParsed)}if(a._r_logic||this._frbtr){this._setSubChecked(c,a.childNodes[0])}else{for(var b=0;b<a.childsCount;b++){this._setSubChecked(c,a.childNodes[b])}}var d=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(c){a.checkstate=1}else{a.checkstate=0}if(a.dscheck){a.checkstate=a.dscheck}this._setSrc(d,this.imPath+((a.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[a.checkstate])};dhtmlXTreeObject.prototype.isItemChecked=function(b){var a=this._globalIdStorageFind(b);if(!a){return}return a.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(d){var a=this._globalIdStorageFind(d);if(!a){return}var b=a.childsCount;for(var c=0;c<b;c++){this._deleteNode(a.childNodes[0].id,a.childNodes[0])}};dhtmlXTreeObject.prototype.deleteItem=function(c,a){if((!this._onrdlh)||(this._onrdlh(c))){var b=this._deleteItem(c,a);if(b){this._fixChildCountLabel(b)}}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype._deleteItem=function(f,b,e){b=dhx4.s2b(b);var a=this._globalIdStorageFind(f);if(!a){return}var c=this.getParentId(f);var d=a.parentObject;this._deleteNode(f,a,e);if(this._editCell&&this._editCell.id==f){this._editCell=null}this._correctPlus(d);this._correctLine(d);if((b)&&(c!=this.rootId)){this.selectItem(c,1)}return d};dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(a){for(var b=0;b<a.childsCount;b++){this._globalIdStorageRecSub(a.childNodes[b]);this._globalIdStorageSub(a.childNodes[b].id)}this._globalIdStorageSub(a.id);var c=a;c.span=null;c.tr.nodem=null;c.tr=null;c.htmlNode=null};dhtmlXTreeObject.prototype.insertNewNext=function(h,l,k,c,f,e,d,b,a){var g=this._globalIdStorageFind(h);if((!g)||(!g.parentObject)){return(0)}var j=this._attachChildNode(0,l,k,c,f,e,d,b,a,g);if((!this.XMLloadingWarning)&&(this.childCalc)){this._fixChildCountLabel(g.parentObject)}return j};dhtmlXTreeObject.prototype.getItemIdByIndex=function(c,a){var b=this._globalIdStorageFind(c);if((!b)||(a>=b.childsCount)){return null}return b.childNodes[a].id};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(c,a){var b=this._globalIdStorageFind(c);if((!b)||(a>=b.childsCount)){return null}return b.childNodes[a].id};dhtmlXTreeObject.prototype.setDragHandler=function(a){this.attachEvent("onDrag",a)};dhtmlXTreeObject.prototype._clearMove=function(){if(this._lastMark){this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,"");this._lastMark=null}this.selectionBar.style.display="none";this.allTree.className=this.allTree.className.replace(" selectionBox","")};dhtmlXTreeObject.prototype.enableDragAndDrop=function(b,a){if(b=="temporary_disabled"){this.dADTempOff=false;b=true}else{this.dADTempOff=true}this.dragAndDropOff=dhx4.s2b(b);if(this.dragAndDropOff){this.dragger.addDragLanding(this.allTree,this)}if(arguments.length>1){this._ddronr=(!dhx4.s2b(a))}};dhtmlXTreeObject.prototype._setMove=function(e,c,g){if(e.parentObject.span){var d=dhx4.absTop(e);var b=dhx4.absTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;if(this.dadmode==2){var f=g-d+(document.body.scrollTop||document.documentElement.scrollTop)-2-e.offsetHeight/2;if((Math.abs(f)-e.offsetHeight/6)>0){this.dadmodec=1;if(f<0){this.dadmodefix=0-e.offsetHeight}}else{this.dadmodec=0}}if(this.dadmodec==0){var a=e.parentObject.span;a.className+=" dragAndDropRow";this._lastMark=a}else{this._clearMove();this.selectionBar.style.top=(d-b+((parseInt(e.parentObject.span.parentNode.previousSibling.childNodes[0].style.height)||18)-1)+this.dadmodefix)+"px";this.selectionBar.style.left="5px";if(this.allTree.offsetWidth>20){this.selectionBar.style.width=(this.allTree.offsetWidth-(_isFF?30:25))+"px"}this.selectionBar.style.display=""}this._autoScroll(null,d,b)}};dhtmlXTreeObject.prototype._autoScroll=function(c,b,a){if(this.autoScroll){if(c){b=dhx4.absTop(c);a=dhx4.absTop(this.allTree)-this.allTree.scrollTop}if((b-a-parseInt(this.allTree.scrollTop))>(parseInt(this.allTree.offsetHeight)-50)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20}if((b-a)<(parseInt(this.allTree.scrollTop)+30)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20}}};dhtmlXTreeObject.prototype._createDragNode=function(f,d){if(!this.dADTempOff){return null}var c=f.parentObject;if(!this.callEvent("onBeforeDrag",[c.id,d])){return null}if(!c.i_sel){this._selectItem(c,d)}this._checkMSelectionLogic();var b=document.createElement("div");var g=new Array();if(this._itim_dg){for(var a=0;a<this._selected.length;a++){g[a]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[a].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[a].span.innerHTML+"</td></tr></table>"}}else{g=this.getSelectedItemText().split(this.dlmtr)}b.innerHTML=g.join("");b.style.position="absolute";b.className="dragSpanDiv";this._dragged=(new Array()).concat(this._selected);return b};dhtmlXTreeObject.prototype._focusNode=function(a){var b=dhx4.absTop(a.htmlNode)-dhx4.absTop(this.allTree);if((b>(this.allTree.offsetHeight-30))||(b<0)){this.allTree.scrollTop=b+this.allTree.scrollTop}};dhtmlXTreeObject.prototype._preventNsDrag=function(a){if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlXTreeObject.prototype._drag=function(g,h,a){if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}if(!a.parentObject){a=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];this.dadmodec=0}this._clearMove();var f=g.parentObject.treeNod;if((f)&&(f._clearMove)){f._clearMove("")}if((!this.dragMove)||(this.dragMove())){if((!f)||(!f._clearMove)||(!f._dragged)){var d=new Array(g.parentObject)}else{var d=f._dragged}var b=a.parentObject;for(var e=0;e<d.length;e++){var c=this._moveNode(d[e],b);if((this.dadmodec)&&(c!==false)){b=this._globalIdStorageFind(c,true,true)}if((c)&&(!this._sADnD)){this.selectItem(c,0,1)}}}if(f){f._dragged=new Array()}};dhtmlXTreeObject.prototype._dragIn=function(d,b,f,e){if(!this.dADTempOff){return 0}var g=b.parentObject;var a=d.parentObject;if((!a)&&(this._ddronr)){return}if(!this.callEvent("onDragIn",[g.id,a?a.id:null,g.treeNod,this])){if(a){this._autoScroll(d)}return 0}if(!a){this.allTree.className+=" selectionBox"}else{if(g.childNodes==null){this._setMove(d,f,e);return d}var j=g.treeNod;for(var c=0;c<j._dragged.length;c++){if(this._checkPNodes(a,j._dragged[c])){this._autoScroll(d);return 0}}this.selectionBar.parentNode.removeChild(this.selectionBar);a.span.parentNode.appendChild(this.selectionBar);this._setMove(d,f,e);if(this._getOpenState(a)<=0){var h=this;this._autoOpenId=a.id;this._autoOpenTimer=window.setTimeout(function(){h._autoOpenItem(null,h);h=null},1000)}}return d};dhtmlXTreeObject.prototype._autoOpenItem=function(b,a){a.openItem(a._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(a){this._clearMove();if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}};dhtmlXTreeObject.prototype._getNextNode=function(a,b){if((!b)&&(a.childsCount)){return a.childNodes[0]}if(a==this.htmlNode){return -1}if((a.tr)&&(a.tr.nextSibling)&&(a.tr.nextSibling.nodem)){return a.tr.nextSibling.nodem}return this._getNextNode(a.parentObject,true)};dhtmlXTreeObject.prototype._lastChild=function(a){if(a.childsCount){return this._lastChild(a.childNodes[a.childsCount-1])}else{return a}};dhtmlXTreeObject.prototype._getPrevNode=function(a,b){if((a.tr)&&(a.tr.previousSibling)&&(a.tr.previousSibling.nodem)){return this._lastChild(a.tr.previousSibling.nodem)}if(a.parentObject){return a.parentObject}else{return -1}};dhtmlXTreeObject.prototype.findItem=function(a,c,b){var d=this._findNodeByLabel(a,c,(b?this.htmlNode:null));if(d){this.selectItem(d.id,true);this._focusNode(d);return d.id}else{return null}};dhtmlXTreeObject.prototype.findItemIdByLabel=function(a,c,b){var d=this._findNodeByLabel(a,c,(b?this.htmlNode:null));if(d){return d.id}else{return null}};dhtmlXTreeObject.prototype.findStrInXML=function(b,c,e){if(!b.childNodes&&b.item){return this.findStrInJSON(b,c,e)}if(!b.childNodes){return false}for(var a=0;a<b.childNodes.length;a++){if(b.childNodes[a].nodeType==1){var d=b.childNodes[a].getAttribute(c);if(!d&&b.childNodes[a].tagName=="itemtext"){d=b.childNodes[a].firstChild.data}if((d)&&(d.toLowerCase().search(e)!=-1)){return true}if(this.findStrInXML(b.childNodes[a],c,e)){return true}}}return false};dhtmlXTreeObject.prototype.findStrInJSON=function(b,c,e){for(var a=0;a<b.item.length;a++){var d=b.item[a].text;if((d)&&(d.toLowerCase().search(e)!=-1)){return true}if(b.item[a].item&&this.findStrInJSON(b.item[a],c,e)){return true}}return false};dhtmlXTreeObject.prototype._findNodeByLabel=function(a,e,d){var a=a.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),"");a=new RegExp(a.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi");if(!d){d=this._selected[0];if(!d){d=this.htmlNode}}var b=d;if(!e){if((d.unParsed)&&(this.findStrInXML(d.unParsed.d,"text",a))){this.reParse(d)}d=this._getNextNode(b);if(d==-1){d=this.htmlNode.childNodes[0]}}else{var c=this._getPrevNode(b);if(c==-1){c=this._lastChild(this.htmlNode)}if((c.unParsed)&&(this.findStrInXML(c.unParsed.d,"text",a))){this.reParse(c);d=this._getPrevNode(b)}else{d=c}if(d==-1){d=this._lastChild(this.htmlNode)}}while((d)&&(d!=b)){if((d.label)&&(d.label.search(a)!=-1)){return(d)}if(!e){if(d==-1){if(b==this.htmlNode){break}d=this.htmlNode.childNodes[0]}if((d.unParsed)&&(this.findStrInXML(d.unParsed.d,"text",a))){this.reParse(d)}d=this._getNextNode(d);if(d==-1){d=this.htmlNode}}else{var c=this._getPrevNode(d);if(c==-1){c=this._lastChild(this.htmlNode)}if((c.unParsed)&&(this.findStrInXML(c.unParsed.d,"text",a))){this.reParse(c);d=this._getPrevNode(d)}else{d=c}if(d==-1){d=this._lastChild(this.htmlNode)}}}return null};dhtmlXTreeObject.prototype.moveItem=function(h,b,j,a){var e=this._globalIdStorageFind(h);if(!e){return(0)}var f=null;switch(b){case"right":alert("Not supported yet");break;case"item_child":var c=(a||this)._globalIdStorageFind(j);if(!c){return(0)}f=(a||this)._moveNodeTo(e,c,0);break;case"item_sibling":var c=(a||this)._globalIdStorageFind(j);if(!c){return(0)}f=(a||this)._moveNodeTo(e,c.parentObject,c);break;case"item_sibling_next":var c=(a||this)._globalIdStorageFind(j);if(!c){return(0)}if((c.tr)&&(c.tr.nextSibling)&&(c.tr.nextSibling.nodem)){f=(a||this)._moveNodeTo(e,c.parentObject,c.tr.nextSibling.nodem)}else{f=(a||this)._moveNodeTo(e,c.parentObject)}break;case"left":if(e.parentObject.parentObject){f=this._moveNodeTo(e,e.parentObject.parentObject,e.parentObject)}break;case"up":var g=this._getPrevNode(e);if((g==-1)||(!g.parentObject)){return null}f=this._moveNodeTo(e,g.parentObject,g);break;case"up_strict":var g=this._getIndex(e);if(g!=0){f=this._moveNodeTo(e,e.parentObject,e.parentObject.childNodes[g-1])}break;case"down_strict":var g=this._getIndex(e);var d=e.parentObject.childsCount-2;if(g==d){f=this._moveNodeTo(e,e.parentObject)}else{if(g<d){f=this._moveNodeTo(e,e.parentObject,e.parentObject.childNodes[g+2])}}break;case"down":var g=this._getNextNode(this._lastChild(e));if((g==-1)||(!g.parentObject)){return}if(g.parentObject==e.parentObject){var g=this._getNextNode(g)}if(g==-1){f=this._moveNodeTo(e,e.parentObject)}else{if((g==-1)||(!g.parentObject)){return}f=this._moveNodeTo(e,g.parentObject,g)}break}if(_isIE&&_isIE<8){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"}return f};dhtmlXTreeObject.prototype.setDragBehavior=function(b,a){this._sADnD=(!dhx4.s2b(a));switch(b){case"child":this.dadmode=0;break;case"sibling":this.dadmode=1;break;case"complex":this.dadmode=2;break}};dhtmlXTreeObject.prototype._loadDynXML=function(c,b){b=b||this.XMLsource;var a=(new Date()).valueOf();this._ld_id=c;if(this.xmlalb=="function"){if(b){b(this._escape(c))}}else{if(this.xmlalb=="name"){this.load(b+this._escape(c))}else{if(this.xmlalb=="xmlname"){this.load(b+this._escape(c)+".xml?uid="+a)}else{this.load(b+dhtmlx.url(b)+"uid="+a+"&id="+this._escape(c))}}}};dhtmlXTreeObject.prototype.enableMultiselection=function(b,a){this._amsel=dhx4.s2b(b);this._amselS=dhx4.s2b(a)};dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){var c=new Array();for(var b=0;b<this._selected.length;b++){for(var a=0;a<this._selected.length;a++){if((b!=a)&&(this._checkPNodes(this._selected[a],this._selected[b]))){c[c.length]=this._selected[a]}}}for(var b=0;b<c.length;b++){this._unselectItem(c[b])}};dhtmlXTreeObject.prototype._checkPNodes=function(b,a){if(this._dcheckf){return false}if(a==b){return 1}if(b.parentObject){return this._checkPNodes(b.parentObject,a)}else{return 0}};dhtmlXTreeObject.prototype.disableDropCheck=function(a){this._dcheckf=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableDistributedParsing=function(c,b,a){this._edsbps=dhx4.s2b(c);this._edsbpsA=new Array();this._edsbpsC=b||10;this._edsbpsD=a||250};dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return(!((!this._edsbpsA)||(!this._edsbpsA.length)))};dhtmlXTreeObject.prototype.getItemParsingState=function(c){var b=this._globalIdStorageFind(c,true,true);if(!b){return 0}if(this._edsbpsA){for(var a=0;a<this._edsbpsA.length;a++){if(this._edsbpsA[a][2]==c){return -1}}}return 1};dhtmlXTreeObject.prototype._distributedStart=function(b,e,d,c,a){if(!this._edsbpsA){this._edsbpsA=new Array()}this._edsbpsA[this._edsbpsA.length]=[b,e,d,c,a]};dhtmlXTreeObject.prototype._distributedStep=function(d){var b=this;if((!this._edsbpsA)||(!this._edsbpsA.length)){b.XMLloadingWarning=0;return}var e=this._edsbpsA[0];this.parsedArray=new Array();this._parse(e[0],e[2],e[3],e[1]);var a=this._globalIdStorageFind(e[2]);this._redrawFrom(this,a,e[4],this._getOpenState(a));var c=this.setCheckList.split(this.dlmtr);for(var f=0;f<c.length;f++){if(c[f]){this.setCheck(c[f],1)}}this._edsbpsA=(new Array()).concat(this._edsbpsA.slice(1));if((!this._edsbpsA.length)){window.setTimeout(function(){if(b.onXLE){b.onXLE(b,d)}b.callEvent("onXLE",[b,d])},1);b.xmlstate=0}};dhtmlXTreeObject.prototype.enableTextSigns=function(a){this._txtimg=dhx4.s2b(a)};dhtmlXTreeObject.prototype.preventIECaching=function(a){dhx4.ajax.cache=!a};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;dhtmlXTreeObject.prototype.disableCheckbox=function(c,b){if(typeof(c)!="object"){var a=this._globalIdStorageFind(c,0,1)}else{var a=c}if(!a){return}a.dscheck=dhx4.s2b(b)?(((a.checkstate||0)%3)+3):((a.checkstate>2)?(a.checkstate-3):a.checkstate);this._setCheck(a);if(a.dscheck<3){a.dscheck=false}};dhtmlXTreeObject.prototype.smartRefreshBranch=function(b,a){this._branchUpdate=1;this.smartRefreshItem(b,a)};dhtmlXTreeObject.prototype.smartRefreshItem=function(d,c){var a=this._globalIdStorageFind(d);for(var b=0;b<a.childsCount;b++){a.childNodes[b]._dmark=true}this.waitUpdateXML=true;if(c&&c.exists){this._parse(c,d)}else{this._loadDynXML(d,c)}};dhtmlXTreeObject.prototype.refreshItems=function(b,c){var d=b.toString().split(this.dlmtr);this.waitUpdateXML=new Array();for(var a=0;a<d.length;a++){this.waitUpdateXML[d[a]]=true}this.load((c||this.XMLsource)+dhtmlx.url(c||this.XMLsource)+"ids="+this._escape(b))};dhtmlXTreeObject.prototype.updateItem=function(g,f,d,c,b,e,h){var a=this._globalIdStorageFind(g);a.userData=new cObject();if(f){a.label=f}a.images=new Array(d||this.imageArray[0],c||this.imageArray[1],b||this.imageArray[2]);this.setItemText(g,f);if(e){this._setCheck(a,true)}if(h=="1"&&!this.hasChildren(g)){a.XMLload=0}this._correctPlus(a);a._dmark=false;return a};dhtmlXTreeObject.prototype.setDropHandler=function(a){this.attachEvent("onDrop",a)};dhtmlXTreeObject.prototype.setOnLoadingStart=function(a){this.attachEvent("onXLS",a)};dhtmlXTreeObject.prototype.setOnLoadingEnd=function(a){this.attachEvent("onXLE",a)};dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(a){this.xmlalb=a};dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(a){this.smcheck=dhx4.s2b(a)};dhtmlXTreeObject.prototype.getXMLState=function(){return(this.xmlstate==1)};dhtmlXTreeObject.prototype.setItemTopOffset=function(f,d){var c;if(typeof(f)!="object"){c=this._globalIdStorageFind(f)}else{c=f}var e=c.span.parentNode.parentNode;c.span.style.paddingBottom="1px";for(var b=0;b<e.childNodes.length;b++){if(b!=0){if(_isIE){e.childNodes[b].style.height="18px";e.childNodes[b].style.paddingTop=parseInt(d)+"px"}else{e.childNodes[b].style.height=18+parseInt(d)+"px"}}else{var a=e.childNodes[b].firstChild;if(e.childNodes[b].firstChild.tagName!="DIV"){a=document.createElement("DIV");e.childNodes[b].insertBefore(a,e.childNodes[b].firstChild)}if((c.parentObject.id!=this.rootId||c.parentObject.childNodes[0]!=c)&&this.treeLinesOn){e.childNodes[b].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")"}a.innerHTML="&nbsp;";a.style.overflow="hidden"}a.style.verticalAlign=e.childNodes[b].style.verticalAlign="bottom";if(_isIE){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"}}};dhtmlXTreeObject.prototype.setIconSize=function(d,b,e){if(e){if((e)&&(e.span)){var a=e}else{var a=this._globalIdStorageFind(e)}if(!a){return(0)}var c=a.span.parentNode.previousSibling.childNodes[0];if(d){c.style.width=d+"px";if(window._KHTMLrv){c.parentNode.style.width=d+"px"}}if(b){c.style.height=b+"px";if(window._KHTMLrv){c.parentNode.style.height=b+"px"}}}else{this.def_img_x=d;this.def_img_y=b}};dhtmlXTreeObject.prototype.getItemImage=function(e,d,b){var c=this._globalIdStorageFind(e);if(!c){return""}var a=c.images[d||0];if(b){a=this.iconURL+a}return a};dhtmlXTreeObject.prototype.enableRadioButtons=function(d,c){if(arguments.length==1){this._frbtr=dhx4.s2b(d);this.checkBoxOff=this.checkBoxOff||this._frbtr;return}var b=this._globalIdStorageFind(d);if(!b){return""}c=dhx4.s2b(c);if((c)&&(!b._r_logic)){b._r_logic=true;for(var a=0;a<b.childsCount;a++){this._setCheck(b.childNodes[a],b.childNodes[a].checkstate)}}if((!c)&&(b._r_logic)){b._r_logic=false;for(var a=0;a<b.childsCount;a++){this._setCheck(b.childNodes[a],b.childNodes[a].checkstate)}}};dhtmlXTreeObject.prototype.enableSingleRadioMode=function(a){this._frbtrs=dhx4.s2b(a)};dhtmlXTreeObject.prototype.openOnItemAdded=function(a){this._hAdI=!dhx4.s2b(a)};dhtmlXTreeObject.prototype.openOnItemAdding=function(a){this._hAdI=!dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableMultiLineItems=function(a){if(a===true){this.mlitems="100%"}else{this.mlitems=a}};dhtmlXTreeObject.prototype.enableAutoTooltips=function(a){this.ettip=dhx4.s2b(a)};dhtmlXTreeObject.prototype.clearSelection=function(a){if(a){this._unselectItem(this._globalIdStorageFind(a))}else{this._unselectItems()}};dhtmlXTreeObject.prototype.showItemSign=function(d,b){var a=this._globalIdStorageFind(d);if(!a){return 0}var c=a.span.parentNode.previousSibling.previousSibling.previousSibling;if(!dhx4.s2b(b)){this._openItem(a);a.closeble=false;a.wsign=true}else{a.closeble=true;a.wsign=false}this._correctPlus(a)};dhtmlXTreeObject.prototype.showItemCheckbox=function(e,d){if(!e){for(var b in this._idpull){this.showItemCheckbox(this._idpull[b],d)}}if(typeof(e)!="object"){e=this._globalIdStorageFind(e,0,0)}if(!e){return 0}e.nocheckbox=!dhx4.s2b(d);var c=e.span.parentNode.previousSibling.previousSibling.childNodes[0];c.parentNode.style.display=(!e.nocheckbox)?"":"none"};dhtmlXTreeObject.prototype.setListDelimeter=function(a){this.dlmtr=a};dhtmlXTreeObject.prototype.setEscapingMode=function(a){this.utfesc=a};dhtmlXTreeObject.prototype.enableHighlighting=function(a){this.ehlt=true;this.ehlta=dhx4.s2b(a)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var b=this.childNodes[3].parentObject;var a=b.treeNod;a.callEvent("onMouseOut",[b.id]);if(b.id==a._l_onMSI){a._l_onMSI=null}if(!a.ehlta){return}b.span.className=b.span.className.replace("_lor","")};dhtmlXTreeObject.prototype._itemMouseIn=function(){var b=this.childNodes[3].parentObject;var a=b.treeNod;if(a._l_onMSI!=b.id){a.callEvent("onMouseIn",[b.id])}a._l_onMSI=b.id;if(!a.ehlta){return}b.span.className=b.span.className.replace("_lor","");b.span.className=b.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor")};dhtmlXTreeObject.prototype.enableActiveImages=function(a){this._aimgs=dhx4.s2b(a)};dhtmlXTreeObject.prototype.focusItem=function(b){var a=this._globalIdStorageFind(b);if(!a){return(0)}this._focusNode(a)};dhtmlXTreeObject.prototype.getAllSubItems=function(a){return this._getAllSubItems(a)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;dhtmlXTreeObject.prototype._getAllScraggyItems=function(c){var d="";for(var b=0;b<c.childsCount;b++){if((c.childNodes[b].unParsed)||(c.childNodes[b].childsCount>0)){if(c.childNodes[b].unParsed){var a=this._getAllScraggyItemsXML(c.childNodes[b].unParsed,1)}else{var a=this._getAllScraggyItems(c.childNodes[b])}if(a){if(d){d+=this.dlmtr+a}else{d=a}}}else{if(!d){d=""+c.childNodes[b].id}else{d+=this.dlmtr+c.childNodes[b].id}}}return d};dhtmlXTreeObject.prototype._getAllFatItems=function(c){var d="";for(var b=0;b<c.childsCount;b++){if((c.childNodes[b].unParsed)||(c.childNodes[b].childsCount>0)){if(!d){d=""+c.childNodes[b].id}else{d+=this.dlmtr+c.childNodes[b].id}if(c.childNodes[b].unParsed){var a=this._getAllFatItemsXML(c.childNodes[b].unParsed,1)}else{var a=this._getAllFatItems(c.childNodes[b])}if(a){d+=this.dlmtr+a}}}return d};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(a){if(a){a=this._globalIdStorageFind(a)}return this._getAllChecked(a,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var a=[this._getAllChecked("","",1)];var b=this._getAllChecked("","",2);if(b){a.push(b)}return a.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(d,c,e){if(!d){d=this.htmlNode}if(d.checkstate==e){if(!d.nocheckbox){if(c){c+=this.dlmtr+d.id}else{c=""+d.id}}}var a=d.childsCount;for(var b=0;b<a;b++){c=this._getAllChecked(d.childNodes[b],c,e)}if(d.unParsed){c=this._getAllCheckedXML(d.unParsed,c,e)}if(c){return c}else{return""}};dhtmlXTreeObject.prototype.setItemStyle=function(d,c,b){var b=b||false;var a=this._globalIdStorageFind(d);if(!a){return 0}if(!a.span.style.cssText){a.span.setAttribute("style",a.span.getAttribute("style")+"; "+c)}else{a.span.style.cssText=b?c:a.span.style.cssText+";"+c}};dhtmlXTreeObject.prototype.enableImageDrag=function(a){this._itim_dg=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setOnDragIn=function(a){this.attachEvent("onDragIn",a)};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(a){this.autoScroll=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setSkin=function(a){var b=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=b+" dhxtree_"+a;if(a=="dhx_terrace"||a=="dhx_web"){this.enableTreeLines(false)}};(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(a){return[a.parent,(a.width||"100%"),(a.height||"100%"),(a.root_id||0)]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})})();dhtmlXTreeObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(d,f,b){var c=dhx4.ajax.xpath(".//item",d);var e=c[0].getAttribute("text");this.obj.insertNewItem(b,f,e,0,0,0,0,"CHILD")});a.attachEvent("updateCallback",function(d,f,b){var c=dhx4.ajax.xpath(".//item",d);var e=c[0].getAttribute("text");this.obj.setItemText(f,e);if(this.obj.getParentId(f)!=b){this.obj.moveItem(f,"item_child",b)}this.setUpdated(f,true,"updated")});a.attachEvent("deleteCallback",function(c,d,b){this.obj.setUserData(d,this.action_param,"true_deleted");this.obj.deleteItem(d,false)});a._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(b,c){if(b==3){a.setUpdated(c,true)}return true});this.attachEvent("onDrop",function(f,e,d,c,b){if(c==b){a.setUpdated(f,true)}});this._onrdlh=function(b){var c=a.getState(b);if(c=="inserted"){a.set_invalid(b,false);a.setUpdated(b,false);return true}if(c=="true_deleted"){a.setUpdated(b,false);return true}a.setUpdated(b,true,"deleted");return false};this._onradh=function(b){a.setUpdated(b,true,"inserted")};a._getRowData=function(e){var d={};var f=this.obj._globalIdStorageFind(e);var c=f.parentObject;var b=0;for(b=0;b<c.childsCount;b++){if(c.childNodes[b]==f){break}}d.tr_id=f.id;d.tr_pid=c.id;d.tr_order=b;d.tr_text=f.span.innerHTML;c=(f._userdatalist||"").split(",");for(b=0;b<c.length;b++){d[c[b]]=f.userData["t_"+c[b]]}return d}};if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachTree=function(a){this.callEvent("_onBeforeContentAttach",["tree"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);this.dataType="tree";this.dataObj=new dhtmlXTreeObject(b,"100%","100%",(a||0));this.dataObj.setSkin(this.conf.skin);this.dataObj.allTree.childNodes[0].style.marginTop="2px";this.dataObj.allTree.childNodes[0].style.marginBottom="2px";b=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}function jsonPointer(b,a){this.d=b;this.dp=a}jsonPointer.prototype={text:function(){var a=function(e){var d=[];for(var c=0;c<e.length;c++){d.push("{"+b(e[c])+"}")}return d.join(",")};var b=function(e){var d=[];for(var c in e){if(typeof(e[c])=="object"){if(c.length){d.push('"'+c+'":['+a(e[c])+"]")}else{d.push('"'+c+'":{'+b(e[c])+"}")}}else{d.push('"'+c+'":"'+e[c]+'"')}}return d.join(",")};return"{"+b(this.d)+"}"},get:function(a){return this.d[a]},exists:function(){return !!this.d},content:function(){return this.d.content},each:function(d,h,g){var b=this.d[d];var j=new jsonPointer();if(b){for(var e=0;e<b.length;e++){j.d=b[e];h.apply(g,[j,e])}}},get_all:function(){return this.d},sub:function(a){return new jsonPointer(this.d[a],this.d)},sub_exists:function(a){return !!this.d[a]},each_x:function(d,j,h,g,e){var b=this.d[d];var k=new jsonPointer(0,this.d);if(b){for(e=e||0;e<b.length;e++){if(b[e][j]){k.d=b[e];if(h.apply(g,[k,e])==-1){return}}}}},up:function(a){return new jsonPointer(this.dp,this.d)},set:function(a,b){this.d[a]=b},clone:function(a){return new jsonPointer(this.d,this.dp)},through:function(b,h,l,e,m){var j=this.d[b];if(j.length){for(var d=0;d<j.length;d++){if(j[d][h]!=null&&j[d][h]!=""&&(!l||j[d][h]==l)){var g=new jsonPointer(j[d],this.d);e.apply(m,[g,d])}var k=this.d;this.d=j[d];if(this.sub_exists(b)){this.through(b,h,l,e,m)}this.d=k}}}};dhtmlXTreeObject.prototype.loadJSArrayFile=function(a,b){if(window.console&&window.console.info){window.console.info("loadJSArrayFile was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSArrayFile(a,b)};dhtmlXTreeObject.prototype._loadJSArrayFile=function(file,callback){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var that=this;this.XMLLoader=function(xml,callback){eval("var z="+xml.responseText);this._loadJSArray(z);if(callback){callback.call(this,xml)}};dhx4.ajax.get(file,function(obj){that.XMLLoader(obj.xmlDoc,callback)})};dhtmlXTreeObject.prototype.loadCSV=function(a,b){if(window.console&&window.console.info){window.console.info("loadCSV was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadCSV(a,b)};dhtmlXTreeObject.prototype._loadCSV=function(a,c){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var b=this;this.XMLLoader=function(d,e){this._loadCSVString(d.responseText);if(e){e.call(this,d)}};dhx4.ajax.get(a,function(d){b.XMLLoader(d.xmlDoc,c)})};dhtmlXTreeObject.prototype.loadJSArray=function(a,b){if(window.console&&window.console.info){window.console.info("loadJSArray was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSArray(a,b)};dhtmlXTreeObject.prototype._loadJSArray=function(a,d){var g=[];for(var b=0;b<a.length;b++){if(!g[a[b][1]]){g[a[b][1]]=[]}g[a[b][1]].push({id:a[b][0],text:a[b][2]})}var e={id:this.rootId};var c=function(l,k){if(g[l.id]){l.item=g[l.id];for(var h=0;h<l.item.length;h++){k(l.item[h],k)}}};c(e,c);this._loadJSONObject(e,d)};dhtmlXTreeObject.prototype.loadCSVString=function(a,b){if(window.console&&window.console.info){window.console.info("loadCSVString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadCSVString(a,b)};dhtmlXTreeObject.prototype._loadCSVString=function(a,g){var j=[];var b=a.split("\n");for(var d=0;d<b.length;d++){var c=b[d].split(",");if(!j[c[1]]){j[c[1]]=[]}j[c[1]].push({id:c[0],text:c[2]})}var h={id:this.rootId};var e=function(m,l){if(j[m.id]){m.item=j[m.id];for(var k=0;k<m.item.length;k++){l(m.item[k],l)}}};e(h,e);this._loadJSONObject(h,g)};dhtmlXTreeObject.prototype.loadJSONObject=function(a,b){if(window.console&&window.console.info){window.console.info("loadJSONObject was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSONObject(a,b)};dhtmlXTreeObject.prototype._loadJSONObject=function(a,b){if(!this.parsCount){this.callEvent("onXLS",[this,null])}this.xmlstate=1;var c=new jsonPointer(a);this._parse(c);this._p=c;if(b){b()}};dhtmlXTreeObject.prototype.loadJSON=function(a,b){if(window.console&&window.console.info){window.console.info("loadJSON was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSON(a,b)};dhtmlXTreeObject.prototype._loadJSON=function(file,callback){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var that=this;this.XMLLoader=function(xml,callback){try{eval("var t="+xml.responseText)}catch(e){dhx4.callEvent("onLoadXMLerror",["Incorrect JSON",(xml),this]);return}var p=new jsonPointer(t);this._parse(p);this._p=p;if(callback){callback.call(this,xml)}};dhx4.ajax.get(file,function(obj){that.XMLLoader(obj.xmlDoc,callback)})};dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){var a=['{"id":"'+this.rootId+'", "item":['];var c=[];for(var b=0;b<this.htmlNode.childsCount;b++){c.push(this._serializeItemJSON(this.htmlNode.childNodes[b]))}a.push(c.join(","));a.push("]}");return a.join("")};dhtmlXTreeObject.prototype._serializeItemJSON=function(g){var a=[];if(g.unParsed){return(g.unParsed.text())}if(this._selected.length){var c=this._selected[0].id}else{c=""}var f=g.span.innerHTML;f=f.replace(/\"/g,'\\"',f);if(!this._xfullXML){a.push('{ "id":"'+g.id+'", '+(this._getOpenState(g)==1?' "open":"1", ':"")+(c==g.id?' "select":"1",':"")+' "text":"'+f+'"'+(((this.XMLsource)&&(g.XMLload==0))?', "child":"1" ':""))}else{a.push('{ "id":"'+g.id+'", '+(this._getOpenState(g)==1?' "open":"1", ':"")+(c==g.id?' "select":"1",':"")+' "text":"'+f+'", "im0":"'+g.images[0]+'", "im1":"'+g.images[1]+'", "im2":"'+g.images[2]+'" '+(g.acolor?(', "aCol":"'+g.acolor+'" '):"")+(g.scolor?(', "sCol":"'+g.scolor+'" '):"")+(g.checkstate==1?', "checked":"1" ':(g.checkstate==2?', "checked":"-1"':""))+(g.closeable?', "closeable":"1" ':"")+(((this.XMLsource)&&(g.XMLload==0))?', "child":"1" ':""))}if((this._xuserData)&&(g._userdatalist)){a.push(', "userdata":[');var e=g._userdatalist.split(",");var d=[];for(var b=0;b<e.length;b++){d.push('{ "name":"'+e[b]+'" , "content":"'+g.userData["t_"+e[b]]+'" }')}a.push(d.join(","));a.push("]")}if(g.childsCount){a.push(', "item":[');var d=[];for(var b=0;b<g.childsCount;b++){d.push(this._serializeItemJSON(g.childNodes[b]))}a.push(d.join(","));a.push("]\n")}a.push("}\n");return a.join("")};